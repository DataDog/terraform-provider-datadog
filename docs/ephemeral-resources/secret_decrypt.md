---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "datadog_secret_decrypt Ephemeral Resource - terraform-provider-datadog"
subcategory: ""
description: |-
  Decrypts a ciphertext value that was encrypted using the secretbridge encryption. Use this to retrieve plaintext values from encrypted computed attributes like encrypted_key for passing to secret managers.
---

# datadog_secret_decrypt (Ephemeral Resource)

Decrypts a ciphertext value that was encrypted using the secretbridge encryption. Use this to retrieve plaintext values from encrypted computed attributes like `encrypted_key` for passing to secret managers.

## Example Usage

```terraform
# Decrypt an encrypted API key for use with a secret manager
# Requires Terraform 1.11+

variable "encryption_key" {
  type        = string
  description = "32-byte encryption key"
  sensitive   = true
}

resource "datadog_api_key" "example" {
  name              = "my-api-key"
  encryption_key_wo = var.encryption_key
}

# Only decrypt when encrypted_key is available
# After secret is stored in Secrets Manager, you can remove encryption_key_wo
# and this block will be skipped on future runs
ephemeral "datadog_secret_decrypt" "api_key" {
  count             = datadog_api_key.example.encrypted_key != null ? 1 : 0
  ciphertext        = datadog_api_key.example.encrypted_key
  encryption_key_wo = var.encryption_key
}

resource "aws_secretsmanager_secret" "datadog_api_key" {
  name = "datadog-api-key"
}

# Use try() to handle the case where decrypter wasn't created
resource "aws_secretsmanager_secret_version" "api_key" {
  secret_id        = aws_secretsmanager_secret.datadog_api_key.id
  secret_string_wo = try(ephemeral.datadog_secret_decrypt.api_key[0].value, "")
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `ciphertext` (String) The encrypted JSON ciphertext to decrypt. Typically from an `encrypted_key` attribute of a resource that supports encryption.
- `encryption_key_wo` (String, Sensitive) Decryption key (32 bytes). Must match the key used during encryption. Source from an ephemeral resource like `ephemeral.random_password`.

### Read-Only

- `value` (String, Sensitive) The decrypted plaintext value. This is ephemeral and never stored in state.
