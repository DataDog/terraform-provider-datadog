---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "datadog_custom_allocation_rule Resource - terraform-provider-datadog"
subcategory: ""
description: |-
  Provides a Datadog DatadogCustomAllocationRule resource. This can be used to create and manage Datadog datadog_custom_allocation_rule.
---

# datadog_custom_allocation_rule (Resource)

Provides a Datadog DatadogCustomAllocationRule resource. This can be used to create and manage Datadog datadog_custom_allocation_rule.

## Example Usage

```terraform
# Create new datadog_custom_allocation_rule resource

resource "datadog_custom_allocation_rule" "my_allocation_rule" {
  costs_to_allocate {
    condition = "is"
    tag       = "aws_product"
    value     = "ec2"
  }
  enabled       = true
  providernames = ["aws"]
  rule_name     = "my-allocation-rule"
  type          = "arbitrary_rule"
  strategy {
    allocated_by_tag_keys = ["team"]
    based_on_costs {
      condition = "is"
      tag       = "env"
      value     = "prod"
    }
    granularity = "daily"
    method      = "even"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `enabled` (Boolean) The `attributes` `enabled`. Whether the rule is enabled.
- `providernames` (List of String) The `attributes` `provider`. The cloud providers the rule should apply to.
- `rule_name` (String) The `attributes` `rule_name`. This field is immutable - changing it will force replacement of the resource.
- `type` (String) The `attributes` `type`. The type of the rule.

### Optional

- `costs_to_allocate` (Block List) (see [below for nested schema](#nestedblock--costs_to_allocate))
- `strategy` (Block, Optional) (see [below for nested schema](#nestedblock--strategy))

### Read-Only

- `created` (String) The `attributes` `created`. The timestamp when the rule was created.
- `id` (String) The ID of this resource.
- `last_modified_user_uuid` (String) The `attributes` `last_modified_user_uuid`. The UUID of the user who last modified the rule.
- `order_id` (Number) The `attributes` `order_id`. This field is read-only and returned by the API. Use the `datadog_custom_allocation_rule_order` resource to manage the order of rules.
- `rejected` (Boolean) The `attributes` `rejected`. This field is read-only and returned by the API after a rule was created, if it failed to apply.
- `updated` (String) The `attributes` `updated`. The timestamp of the last update.
- `version` (Number) The `attributes` `version`. The rule version number of the rule. Can be used in the `datadog_custom_allocation_rule_order` resource to manage the order of rules.

<a id="nestedblock--costs_to_allocate"></a>
### Nested Schema for `costs_to_allocate`

Optional:

- `condition` (String) The `items` `condition`.
- `tag` (String) The `items` `tag`.
- `value` (String) The `items` `value`. Use this for single-value conditions (not 'in'/'not in').
- `values` (List of String) The `items` `values`. Use this for multi-value conditions ('in'/'not in').


<a id="nestedblock--strategy"></a>
### Nested Schema for `strategy`

Optional:

- `allocated_by` (Block List) (see [below for nested schema](#nestedblock--strategy--allocated_by))
- `allocated_by_filters` (Block List) (see [below for nested schema](#nestedblock--strategy--allocated_by_filters))
- `allocated_by_tag_keys` (List of String) The `strategy` `allocated_by_tag_keys`.
- `based_on_costs` (Block List) (see [below for nested schema](#nestedblock--strategy--based_on_costs))
- `based_on_timeseries` (Block, Optional) (see [below for nested schema](#nestedblock--strategy--based_on_timeseries))
- `evaluate_grouped_by_filters` (Block List) (see [below for nested schema](#nestedblock--strategy--evaluate_grouped_by_filters))
- `evaluate_grouped_by_tag_keys` (List of String) The `strategy` `evaluate_grouped_by_tag_keys`.
- `granularity` (String) The `strategy` `granularity`.
- `method` (String) The `strategy` `method`.

<a id="nestedblock--strategy--allocated_by"></a>
### Nested Schema for `strategy.allocated_by`

Optional:

- `allocated_tags` (Block List) (see [below for nested schema](#nestedblock--strategy--allocated_by--allocated_tags))
- `percentage` (Number) The `items` `percentage`. The numeric value format should be a 32bit float value.

<a id="nestedblock--strategy--allocated_by--allocated_tags"></a>
### Nested Schema for `strategy.allocated_by.allocated_tags`

Optional:

- `key` (String) The `items` `key`.
- `value` (String) The `items` `value`.



<a id="nestedblock--strategy--allocated_by_filters"></a>
### Nested Schema for `strategy.allocated_by_filters`

Optional:

- `condition` (String) The `items` `condition`.
- `tag` (String) The `items` `tag`.
- `value` (String) The `items` `value`.
- `values` (List of String) The `items` `values`.


<a id="nestedblock--strategy--based_on_costs"></a>
### Nested Schema for `strategy.based_on_costs`

Optional:

- `condition` (String) The `items` `condition`.
- `tag` (String) The `items` `tag`.
- `value` (String) The `items` `value`.
- `values` (List of String) The `items` `values`.


<a id="nestedblock--strategy--based_on_timeseries"></a>
### Nested Schema for `strategy.based_on_timeseries`


<a id="nestedblock--strategy--evaluate_grouped_by_filters"></a>
### Nested Schema for `strategy.evaluate_grouped_by_filters`

Optional:

- `condition` (String) The `items` `condition`.
- `tag` (String) The `items` `tag`.
- `value` (String) The `items` `value`.
- `values` (List of String) The `items` `values`.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import datadog_custom_allocation_rule.new_list ""
```
