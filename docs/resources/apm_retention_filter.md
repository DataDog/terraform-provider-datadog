---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "datadog_apm_retention_filter Resource - terraform-provider-datadog"
subcategory: ""
description: |-
  The object describing the configuration of the retention filter to create/update.
---

# datadog_apm_retention_filter (Resource)

The object describing the configuration of the retention filter to create/update.

## Example Usage

```terraform
# Create APM retention filter
resource "datadog_apm_retention_filter" "foo" {
  name = "Sample order"
  rate = "1.0"
  filter {
    query = "service:sample AND env:production AND @http.method:GET AND app:sampleapp AND @http.status_code:200 AND @duration:>600000000"
  }
  filter_type = "spans-sampling-processor"
  enabled     = false
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `enabled` (Boolean) the status of the retention filter.
- `filter_type` (String) The type of the retention filter, currently only spans-processing-sampling is available. Valid values are `spans-sampling-processor`.
- `name` (String) The name of the retention filter.
- `rate` (String) Sample rate to apply to spans going through this retention filter as a string, a value of 1.0 keeps all spans matching the query.

### Optional

- `filter` (Block, Optional) The spans filter. Spans matching this filter will be indexed and stored. (see [below for nested schema](#nestedblock--filter))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--filter"></a>
### Nested Schema for `filter`

Optional:

- `query` (String) The search query - follow the span search syntax, use `AND` between tags and `\` to escape special characters, use nanosecond for duration. Defaults to `"*"`.

## Import

Import is supported using the following syntax:

```shell
# Import existing APM retention filter 
terraform import datadog_apm_retention_filter.foo <filter_id>
```
