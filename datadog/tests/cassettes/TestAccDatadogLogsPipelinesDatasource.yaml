---
version: 1
interactions:
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines
    method: GET
  response:
    body: |
      [{"is_enabled":true,"name":"python","filter":{"query":"source:python"},"is_read_only":true,"type":"pipeline","id":"rTxbr2MpQsSCEtn66XmwnQ","processors":[{"is_enabled":true,"grok":{"support_rules":"_datadog_prefix (%{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}|%{date(\"yyyy-MM-dd H:mm:ss,SSS\"):timestamp}) %{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{notSpace:filename}:%{number:lineno}\\]\\s+\\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\] -\n\n_python_prefix %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{integer:process.id}\\]\n","match_rules":"traceback_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}Traceback \\(most recent call last\\):(?s)\\s*%{data:error.stack}\n\npython_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}\n\npython_fallback %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+%{data::keyvalue}((\\n|\\t)%{data:error.stack})?\n\n#Samples\n#2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log\n\n# Datadog format\n#2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext\n"},"name":"Parsing python default format","source":"message","samples":["2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log","2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext","2020-03-20 14:15:07,124 INFO [root] [app.py:78] [dd.service=excelsior dd.env=prod dd.version=abc123 dd.trace_id=9659687005038611690 dd.span_id=6632586210846541907] - This is a test of info logs","2021-07-09 8:58:31,137 WARNING [root] [views.py:42] [dd.service=datadoggo dd.env=prod dd.version=abc546 dd.trace_id=2296056412404370861 dd.span_id=16818077145337196836] - New post view.","2017-12-26T10:44:59,311 ERROR [dd.dogweb.lib.static_asset] [20081] rid=b0RV4J Error reading statics_version file.Traceback (most recent call last): File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["levelname"],"type":"status-remapper","name":"Define `levelname` as the official status of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["traceback"],"preserve_source":false,"type":"attribute-remapper","name":"Map `traceback` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `name` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["threadName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `threadName` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"parsing_traceback File \"%{notSpace:filename}\", line %{integer:lineno}.*\\s+%{regex(\"[a-zA-Z]*Error[a-zA-Z]*\"):error.kind}: %{data:error.message}\n"},"name":"Parsing python traceback","source":"error.stack","samples":["File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"my first pipeline","filter":{"query":"source:redis"},"is_read_only":false,"type":"pipeline","id":"2QGdoZWESWi6WArjxl4cxg","processors":[{"is_enabled":true,"sources":["verbose"],"type":"date-remapper","name":"Define date"},{"is_enabled":true,"name":"processor from nested pipeline","expression":"(time1-time2)*1000","is_replace_missing":false,"type":"arithmetic-processor","target":"my_arithmetic"},{"is_enabled":true,"type":"category-processor","name":"Categorise severity level","categories":[{"filter":{"query":"@severity: \"-\""},"name":"verbose"},{"filter":{"query":"@severity: \".\""},"name":"debug"}],"target":"redis.severity"},{"is_enabled":true,"grok":{"support_rules":"date_parser %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}","match_rules":"rule %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}"},"name":"Parsing Stack traces","source":"message","samples":[],"type":"grok-parser"},{"is_enabled":true,"filter":{"query":"source:kafka"},"type":"pipeline","name":"my nested pipeline","processors":[{"is_enabled":true,"name":"Define url parser","sources":["http_test"],"target":"http_test.details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Define user agent parser","sources":["http_agent"],"is_encoded":false,"type":"user-agent-parser","target":"http_agent.details"}]},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"geo ip parse","sources":["ip1"],"type":"geo-ip-parser","target":"ip.address"},{"is_enabled":false,"name":"","source":"ip1","lookup_table":["key,value"],"type":"lookup-processor","target":"ip.address"},{"is_enabled":true,"name":"lookup processor with optional fields","source":"ip2","lookup_table":["key,value"],"default_lookup":"default","type":"lookup-processor","target":"ip.address"}]},{"is_enabled":true,"name":"sample pipeline update","filter":{"query":"source:foo"},"is_read_only":false,"type":"pipeline","id":"0mc2Xh9XTOKHDRooX8oU7Q","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"Rule %{word:my_word2} %{number:my_float2}"},"name":"sample grok parser","source":"message","samples":["Rule fooo 1.2"],"type":"grok-parser"},{"is_enabled":true,"sources":["msg"],"type":"message-remapper","name":"sample message remapper"}]},{"is_enabled":true,"name":"Web Browser logs","filter":{"query":"source:browser"},"is_read_only":true,"type":"pipeline","id":"cgS5obmTSi6NgGX05lf0tg","processors":[{"is_enabled":true,"name":"Parsing the backend endpoint url","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"name":"Parsing the url of the current page","sources":["view.url"],"target":"view.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Parsing the url of the previous page","sources":["view.referrer"],"target":"view.referrer_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"","sources":["network.client.ip"],"type":"geo-ip-parser","target":"network.client.geoip"}]},{"is_enabled":true,"name":"Java","filter":{"query":"source:java"},"is_read_only":true,"type":"pipeline","id":"JW6WRX6zSYO6P27n-R85vw","processors":[{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status %{word:level}\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2000-09-07 14:07:41,508 [main] INFO  MyApp - Entering application.","54 [main] INFO MyApp.foo.bar - Entering application.","2000-09-07 14:07:44 INFO org.foo.bar:32 - Entering application.","2000-09-07 14:07:44.452 [main] INFO org.foo.bar - Entering application."],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_gc_event_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\n_parallel \\[Parallel\\sTime:\\s%{number:parallel_time}\\sms,\\sGC\\sWorkers:\\s%{number:gc_worker.count}]\n\n_gc_worker_start \\[GC\\sWorker\\sStart\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.start.min},\\sAvg:\\s%{number:gc_worker.start.avg},\\sMax:\\s%{number:gc_worker.start.max},\\sDiff:\\s%{number:gc_worker.start.diff}]\n\n_ext_root_scanning \\[Ext\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:exit_root_scanning.min},\\sAvg:\\s%{number:exit_root_scanning.avg},\\sMax:\\s%{number:exit_root_scanning.max},\\sDiff:\\s%{number:exit_root_scanning.diff},\\sSum:\\s%{number:exit_root_scanning.sum}]\n\n_update_rs \\[Update\\sRS\\s\\(ms\\):\\sMin:\\s%{number:update_rs.min},\\sAvg:\\s%{number:update_rs.avg},\\sMax:\\s%{number:update_rs.max},\\sDiff:\\s%{number:update_rs.diff},\\sSum:\\s%{number:update_rs.sum}]\n\n_gcc_event %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}:%{notSpace}\\s\\[%{regex(\"([^\\\\]]*)\"):event.type}]\n\n_processed_buffer \\[Processed\\sBuffers:\\sMin:\\s%{number:processed_buffer.min},\\sAvg:\\s%{number:processed_buffer.avg},\\sMax:\\s%{number:processed_buffer.max},\\sDiff:\\s%{number:processed_buffer.diff},\\sSum:\\s%{number:processed_buffer.sum}]\n\n_scan_rs \\[Scan\\sRS\\s\\(ms\\):\\sMin:\\s%{number:scan_rs.min},\\sAvg:\\s%{number:scan_rs.avg},\\sMax:\\s%{number:scan_rs.max},\\sDiff:\\s%{number:scan_rs.diff},\\sSum:\\s%{number:scan_rs.sum}]\n\n_code_root_scan \\[Code\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:code_root.scan.min},\\sAvg:\\s%{number:code_root.scan.avg},\\sMax:\\s%{number:code_root.scan.max},\\sDiff:\\s%{number:code_root.scan.diff},\\sSum:\\s%{number:code_root.scan.sum}]\n\n_object_copy \\[Object\\sCopy\\s\\(ms\\):\\sMin:\\s%{number:object_copy.min},\\sAvg:\\s%{number:object_copy.avg},\\sMax:\\s%{number:object_copy.max},\\sDiff:\\s%{number:object_copy.diff},\\sSum:\\s%{number:object_copy.sum}]\n\n_termination \\[Termination\\s\\(ms\\):\\sMin:\\s%{number:termination.min},\\sAvg:\\s%{number:termination.avg},\\sMax:\\s%{number:termination.max},\\sDiff:\\s%{number:termination.diff},\\sSum:\\s%{number:termination.sum}]\n\n_termination_attempts \\[Termination\\sAttempts:\\sMin:\\s%{number:termination.attempts.min},\\sAvg:\\s%{number:termination.attempts.avg},\\sMax:\\s%{number:termination.attempts.max},\\sDiff:\\s%{number:termination.attempts.diff},\\sSum:\\s%{number:termination.attempts.sum}]\n\n_gc_worker_other \\[GC\\sWorker\\sOther\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.other.min},\\sAvg:\\s%{number:gc_worker.other.avg},\\sMax:\\s%{number:gc_worker.other.max},\\sDiff:\\s%{number:gc_worker.other.diff},\\sSum:\\s%{number:gc_worker.other.sum}]\n\n_gc_worker_total \\[GC\\sWorker\\sTotal\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.total.min},\\sAvg:\\s%{number:gc_worker.total.avg},\\sMax:\\s%{number:gc_worker.total.max},\\sDiff:\\s%{number:gc_worker.total.diff},\\sSum:\\s%{number:gc_worker.total.sum}]\n\n_gc_worker_end \\[GC\\sWorker\\sEnd\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.end.min},\\sAvg:\\s%{number:gc_worker.end.avg},\\sMax:\\s%{number:gc_worker.end.max},\\sDiff:\\s%{number:gc_worker.end.diff}]\n\n_code_root_fixup \\[Code\\sRoot\\sFixup:\\s%{number:code_root.fixup}\\sms]\n\n_code_root_purge \\[Code\\sRoot\\sPurge:\\s%{number:code_root.purge}\\sms]\n\n_clear_ct \\[Clear\\sCT:\\s%{number:clear_ct}\\sms]\n\n_other \\[Other:\\s%{number:other}\\sms]\n\n_choose_cset \\[Choose\\sCSet:\\s%{number:choose_cset}\\sms]\n\n_ref_proc \\[Ref\\sProc:\\s%{number:ref.proc}\\sms]\n\n_ref_enq \\[Ref\\sEnq:\\s%{number:ref.enq}\\sms]\n\n_redirty_cards \\[Redirty\\sCards:\\s%{number:redirty_cards}\\sms]\n\n_humongous_register \\[Humongous\\sRegister:\\s%{number:humongous_register}\\sms]\n\n_humongous_reclaim \\[Humongous\\sReclaim:\\s%{number:humongous_reclaim}\\sms]\n\n_free \\[Free\\sCSet:\\s%{number:free}\\sms]\n\n_memory_usage \\[Eden: (%{number:eden.memory_before}M|%{number:eden.memory_before:scale(1000)}G)\\((%{number:eden.memory_allocated_before}M|%{number:eden.memory_allocated_before:scale(1000)}G)\\)->%{number:eden.memory_after}B\\((%{number:eden.memory_allocated_after}M|%{number:eden.memory_allocated_after:scale(1000)}G)\\)\\sSurvivors:\\s%{number:survivor.memory_before}M->%{number:survivor.memory_after}M\\sHeap:\\s(%{number:heap.memory_before}M|%{number:heap.memory_before:scale(1000)}G)\\((%{number:heap.memory_allocated_before}M|%{number:heap.memory_allocated_before:scale(1000)}G)\\)->%{number:heap.memory_after}M\\((%{number:heap.memory_allocated_after}M|%{number:heap.memory_allocated_after:scale(1000)}G)\\)]\n\n_times \\[Times:\\suser=%{number:times.user}\\ssys=%{number:times.system},\\sreal=%{number:times.real}\\ssecs]\n","match_rules":"gc_nonverbose_basic \\[%{notSpace}\\]\\[%{word:level}\\s*\\]\\[%{word:gc.type}\\] GC\\(%{number:gc.iteration}\\) %{data:gc.action} \\(%{data:gc.phase}\\) %{number:heap.memory_before}M\\-\\>%{number:heap.memory_after}M\\(%{number:heap.memory_total}M\\) %{number:duration:scale(1000000)}ms\n\ngc_action_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\nnon_gc_action_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[%{regex(\"([^,]*)\"):gc.action}(,\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\ngc_verbose %{_gc_event_phase_duration}(\\r|\\n|\\s)*%{_parallel}(\\r|\\n|\\s)*%{_gc_worker_start}(\\r|\\n|\\s)*%{_ext_root_scanning}(\\r|\\n|\\s)*%{_update_rs}(\\r|\\n|\\s)*%{_processed_buffer}(\\r|\\n|\\s)*%{_scan_rs}(\\r|\\n|\\s)*%{_code_root_scan}(\\r|\\n|\\s)*%{_object_copy}(\\r|\\n|\\s)*%{_termination}(\\r|\\n|\\s)*%{_termination_attempts}(\\r|\\n|\\s)*%{_gc_worker_other}(\\r|\\n|\\s)*%{_gc_worker_total}(\\r|\\n|\\s)*%{_gc_worker_end}(\\r|\\n|\\s)*%{_code_root_fixup}(\\r|\\n|\\s)*%{_code_root_purge}(\\r|\\n|\\s)*%{_clear_ct}(\\r|\\n|\\s)*%{_other}(\\r|\\n|\\s)*%{_choose_cset}(\\r|\\n|\\s)*%{_ref_proc}(\\r|\\n|\\s)*%{_ref_enq}(\\r|\\n|\\s)*%{_redirty_cards}(\\r|\\n|\\s)*%{_humongous_register}(\\r|\\n|\\s)*%{_humongous_reclaim}(\\r|\\n|\\s)*%{_free}(\\r|\\n|\\s)*%{_memory_usage}(\\r|\\n|\\s)*%{_times}\n\n#Parse Java 11 GC logs formats\ngc_new_format \\[%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}\\]\\[%{notSpace:status}\\]\\[%{notSpace:gc.type}(\\s)?\\]\\sGC\\(%{number:gc.iteration}\\)\\s%{data:gc.action}(\\s%{number:duration:scale(1000000)}ms)?\n"},"name":"Parsing GC logs","source":"message","samples":["[9237.485s][info   ][gc] GC(835) Pause Young (G1 Evacuation Pause) 4937M->645M(7168M) 17.476ms","2019-03-20T14:36:30.111+0000: 41.098: [GC concurrent-mark-end, 0.0272767 secs]","2019-03-20T14:36:30.111+0000: 41.071: [GC concurrent-mark-start]","2019-03-20T14:36:30.111+0000: 41.099: [Finalize Marking, 0.0011661 secs]"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `stack_trace` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger_name","loggerName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger_name`, `loggerName` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread_name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread_name` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Java Stack traces","source":"error.stack","samples":["java.lang.NullPointerException: this is my error message\n at com.hello.world.flow.Checker.checkCacheEntryyy(Checker.java: 154)\n"],"type":"grok-parser"},{"is_enabled":true,"name":"Calculate GC memory freed","expression":"(heap.memory_before - heap.memory_after)","is_replace_missing":false,"type":"arithmetic-processor","target":"gc.memory_freed"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env","contextMap.dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env`, `contextMap.dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version","contextMap.dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version`, `contextMap.dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service","contextMap.dd.service"],"type":"service-remapper","name":"Define `dd.service`, `contextMap.dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"Datadog Agent","filter":{"query":"source:(agent OR datadog-agent OR datadog-agent-cluster-worker OR datadog-cluster-agent OR process-agent OR security-agent OR system-probe OR trace-agent OR cluster-agent)"},"is_read_only":true,"type":"pipeline","id":"4I6FNy5GToqi2fKVAqNZJw","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"agent_rule         %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\) \\|( %{data::keyvalue(\":\")} \\|)?( - \\|)?( \\(%{notSpace:pyFilename}:%{number:pyLineno}\\) \\|)?%{data}\nagent_rule_pre_611 %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\)%{data}\njmxfetch_rule      %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level}\\s+\\| %{word:class} \\| %{data}\n"},"name":"Parsing Datadog Agent logs","source":"message","samples":["2020-07-01 09:48:14 UTC | CORE | INFO | (pkg/collector/runner/runner.go:327 in work) | check:network,type:core | Done running check","2020-09-15 10:00:07 UTC | CORE | INFO | (pkg/collector/python/datadog_agent.go:120 in LogMessage) | kafka_cluster_status:8ca7b736f0aa43e5 | (kafka_cluster_status.py:213) | Checking for out of sync partition replicas","2019-04-08 13:53:48 UTC | TRACE | INFO | (pkg/trace/agent/agent.go:145 in loop) | exiting","2019-02-01 16:59:41 UTC | INFO | (connection_manager.go:124 in CloseConnection) | Connection closed","2020-11-18 10:31:13 UTC | JMX | INFO  | App | Successfully initialized instance: cassandra-localhost-7199"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"}]},{"is_enabled":true,"name":"test-oneof","filter":{"query":"kube_deployment:synthetics-* OR service:synthetics* OR service:ingress-haproxy-synthetics"},"is_read_only":false,"type":"pipeline","id":"zpVyok_OSzWrvV38NS-YAA","processors":[{"is_enabled":true,"filter":{"query":"source:go OR log_format:dd-go-std"},"type":"pipeline","name":"oneof go","processors":[]},{"is_enabled":true,"override_on_conflict":false,"target":"synthetics_test_url.host","source_type":"attribute","target_type":"attribute","sources":["host"],"preserve_source":true,"type":"attribute-remapper","name":"oneof processor"}]},{"is_enabled":true,"name":"Sinatra","filter":{"query":"source:sinatra"},"is_read_only":true,"type":"pipeline","id":"vL--Mbs7SceY84ADEYu40w","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access (%{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}|%{date(\"dd/MMM/yyyy HH:mm:ss\"):date_access})\n_duration %{number:duration:scale(1000000000)}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)( %{_duration}|-)?\n"},"name":"Parsing Sinatra logs","source":"message","samples":["127.0.0.1 - - [15/Jul/2018:17:41:40 +0000] \"GET /uptime_status HTTP/1.1\" 200 34 0.0004","127.0.0.1 - - [15/Jul/2018 23:40:31] \"GET /uptime_status HTTP/1.1\" 200 6997 1.8096"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category"],"type":"status-remapper","name":"Define `http.status_category` as the official status of the log"}]},{"is_enabled":true,"name":"Nginx","filter":{"query":"source:nginx"},"is_read_only":true,"type":"pipeline","id":"RSbXaJxLS8WSZbAV6vJnYg","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_user_agent %{regex(\"[^\\\\\\\"]*\"):http.useragent}\n_referer %{notSpace:http.referer}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access %{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}\n_x_forwarded_for %{regex(\"[^\\\\\\\"]*\"):http._x_forwarded_for:nullIf(\"-\")}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)\n\naccess.combined %{access.common} (%{number:duration:scale(1000000000)} )?\"%{_referer}\" \"%{_user_agent}\"( \"%{_x_forwarded_for}\")?.*\n\nerror.format %{date(\"yyyy/MM/dd HH:mm:ss\"):date_access} \\[%{word:level}\\] %{data:error.message}(, %{data::keyvalue(\": \",\",\")})?\n"},"name":"Parsing Nginx logs","source":"message","samples":["127.0.0.1 - frank [13/Jul/2016:10:55:36 +0000] \"GET /apache_pb.gif HTTP/1.0\" 200 2326","172.17.0.1 - - [06/Jan/2017:16:16:37 +0000] \"GET /datadoghq/company?test=var1%20Pl HTTP/1.1\" 200 612 \"http://www.perdu.com/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36\" \"-\"","2017/09/26 14:36:50 [error] 8409#8409: *317058 \"/usr/share/nginx/html/sql/sql-admin/index.html\" is not found (2: No such file or directory), client: 217.92.148.44, server: localhost, request: \"HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1\", host: \"174.138.82.103\""],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"network.client.ip","source_type":"attribute","target_type":"attribute","sources":["client"],"preserve_source":false,"type":"attribute-remapper","name":"Map `client` to `network.client.ip`"},{"is_enabled":true,"grok":{"support_rules":"_method %{word:http.method}\n_url %{notSpace:http.url}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n","match_rules":"request_parsing (?>%{_method} |)%{_url}(?> %{_version}|)\n"},"name":"Parsing Nginx Error log requests","source":"request","samples":["HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category","level"],"type":"status-remapper","name":"Define `http.status_category`, `level` as the official status of the log"}]},{"is_enabled":false,"name":"Jenkins","filter":{"query":"source:jenkins service:jenkins"},"is_read_only":false,"type":"pipeline","id":"LWIrk9TLT3Kp9hnIbWBs2w","processors":[{"is_enabled":true,"filter":{"query":"@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Main Logs","processors":[{"is_enabled":false,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss.SSS+0000\"):date}\n_id \\[id\\=%{integer:id}\\]\n_level %{word:level}\n_logger (\\w+|\\.)+?%{regex(\"([a-zA-Z0-9]+[.][a-zA-Z0-9]+)\"):logger.name}\\#%{data:logger.label}\n_message %{data:message}\n","match_rules":"rule %{_date}\\s+%{_id}\\s+%{_level}\\s+%{_logger}\\:\\s+%{_message}"},"name":"parse the log message","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status (%{word:level}|\\[%{word:level}\\s*\\])\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+(\\(%{_logger_name}:%{_line}\\)|%{_logger_name})\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_custom_jenkins (%{_date}|%{_date_ms}|%{_date_slf4j})(\\+0000)?\\s+\\[(id=)?%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}:\\s+?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"}]},{"is_enabled":true,"filter":{"query":"-@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Job Logs","processors":[{"is_enabled":true,"grok":{"support_rules":"_job %{data:jenkins.job}\n_build %{data:jenkins.build}\n","match_rules":"pipeline_job_rule /var/lib/jenkins/jobs/pipeline/jobs/%{data:jenkins.pipeline}/jobs/%{_job}/builds/%{_build}/log\nnon_pipeline_job_rule /var/lib/jenkins/jobs/%{_job}/builds/%{_build}/log\n"},"name":"parse tailed_path","source":"tailed_path","samples":["/var/lib/jenkins/jobs/pipeline/jobs/admin/jobs/venmo-platform-pr-controller/builds/52228/log","/var/lib/jenkins/jobs/pipeline/jobs/default/jobs/venmo-platform-pr-foundation-swagger-missing-descriptions/builds/5210/log","/var/lib/jenkins/jobs/update_datadog_metrics/builds/49760/log"],"type":"grok-parser"}]}]},{"is_enabled":true,"name":"Ruby","filter":{"query":"source:ruby"},"is_read_only":true,"type":"pipeline","id":"TL1aouiMTNmpCCN1iZxoSA","processors":[{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread` to `logger.thread_name`"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["exception","stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `exception`, `stack_trace` to `error.stack`"},{"is_enabled":true,"grok":{"support_rules":"_date (?:%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSSSS\"):date}|%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSS\"):date})\n_status %{word:level}\n_thread_id %{word:logger.thread_id}\n_thread_name %{notSpace:logger.thread_name}\n_logger_name %{notSpace:logger.name}\n_ruby_log_prefix %{word}, \\[%{_date} #%{_thread_id}\\]\\s+%{_status}\\s+--\\s+(?:%{_logger_name})?:(?:\\s+%{_trace_rule})?\n_trace_rule \\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\]\n_datadog_prefix \\[%{date(\"yyyy-MM-dd HH:mm:ss Z\"):date}\\]\\[%{word:application}\\]\\[%{_status}\\]%{_trace_rule}\n_activate_status %{word:active_directory.process_status}\n","match_rules":"# Active Directory Rails logs\n\ncompleted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{integer:http.status_code}(?: (?:%{word}|Internal Server Error))? in %{number:duration}ms \\((?>Views: %{number:views}ms \\| )?ActiveRecord: %{number:activerecord}ms\\)\n\nprocessing_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} by %{notSpace:processor}.*\n\nstarted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{word:http.method} \"%{notSpace:http.url_details.path}\" for %{ipOrHost:network.client.ip}.*\n\ndatadog_format %{_datadog_prefix} %{data::keyvalue(\"=\",\"/\")}(?>(\\n|\\t)%{data:error.stack})?\n\nreceived_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?Received: %{data::json}\n\n## Default Ruby formats\nRuby_default %{_ruby_log_prefix}\\s+%{data:error.message}(?>(\\n|\\t)%{data:error.stack})?\n\nRuby_keyvalue %{data::keyvalue(\"=\",\"/\")}\n\n# Extra samples:\n#I, [1999-03-03T02:34:24.895701 #19074]  INFO -- Main: Some error.\n## Datadog Format\n#[dd.trace_id=1321281354128614668 dd.span_id=5986620922286636160] Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.0ms)\n"},"name":"Parsing Ruby Default formats","source":"message","samples":["I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 6.2ms)","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Started GET \"/api/v1/example/query\" for 123.123.123.123 at 1999-03-03 02:34:24+0000","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Processing by MyCheck::CheckController#index as JSON","I, [2018-06-27T08:01:52.991728 #1]  INFO -- : Received: {\"action\":\"cancel\",\"order\":{\"id\":1234567,\"timestamp\":153012312}}","[2019-01-16 15:38:45 +0000][my_app][WARN][dd.trace_id=7396234561907730428 dd.span_id=1152346429682372911] This is a test message!"],"type":"grok-parser"},{"is_enabled":true,"sources":["date"],"type":"date-remapper","name":"Define `date` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Stack trace","source":"error.stack","samples":["ZeroDivisionError: divided by 0\nfrom devide.rb:6:in `divide`  \nfrom devide.rb:14:in `call`\nfrom devide.rb:18:in `<main>`\n"],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"http.method","source_type":"attribute","target_type":"attribute","sources":["method"],"preserve_source":false,"type":"attribute-remapper","name":"Map `method` to `http.method`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.url_details.path","source_type":"attribute","target_type":"attribute","sources":["path"],"preserve_source":false,"type":"attribute-remapper","name":"Map `path` to `http.url_details.path`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.status_code","source_type":"attribute","target_type":"attribute","sources":["status"],"preserve_source":false,"type":"attribute-remapper","name":"Map `status` to `http.status_code`"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"},{"is_enabled":true,"name":"Convert duration unit ms to ns","expression":"duration*1000000","is_replace_missing":false,"type":"arithmetic-processor","target":"duration"}]}]
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines
    method: GET
  response:
    body: |
      [{"is_enabled":true,"name":"python","filter":{"query":"source:python"},"is_read_only":true,"type":"pipeline","id":"rTxbr2MpQsSCEtn66XmwnQ","processors":[{"is_enabled":true,"grok":{"support_rules":"_datadog_prefix (%{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}|%{date(\"yyyy-MM-dd H:mm:ss,SSS\"):timestamp}) %{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{notSpace:filename}:%{number:lineno}\\]\\s+\\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\] -\n\n_python_prefix %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{integer:process.id}\\]\n","match_rules":"traceback_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}Traceback \\(most recent call last\\):(?s)\\s*%{data:error.stack}\n\npython_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}\n\npython_fallback %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+%{data::keyvalue}((\\n|\\t)%{data:error.stack})?\n\n#Samples\n#2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log\n\n# Datadog format\n#2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext\n"},"name":"Parsing python default format","source":"message","samples":["2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log","2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext","2020-03-20 14:15:07,124 INFO [root] [app.py:78] [dd.service=excelsior dd.env=prod dd.version=abc123 dd.trace_id=9659687005038611690 dd.span_id=6632586210846541907] - This is a test of info logs","2021-07-09 8:58:31,137 WARNING [root] [views.py:42] [dd.service=datadoggo dd.env=prod dd.version=abc546 dd.trace_id=2296056412404370861 dd.span_id=16818077145337196836] - New post view.","2017-12-26T10:44:59,311 ERROR [dd.dogweb.lib.static_asset] [20081] rid=b0RV4J Error reading statics_version file.Traceback (most recent call last): File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["levelname"],"type":"status-remapper","name":"Define `levelname` as the official status of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["traceback"],"preserve_source":false,"type":"attribute-remapper","name":"Map `traceback` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `name` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["threadName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `threadName` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"parsing_traceback File \"%{notSpace:filename}\", line %{integer:lineno}.*\\s+%{regex(\"[a-zA-Z]*Error[a-zA-Z]*\"):error.kind}: %{data:error.message}\n"},"name":"Parsing python traceback","source":"error.stack","samples":["File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"my first pipeline","filter":{"query":"source:redis"},"is_read_only":false,"type":"pipeline","id":"2QGdoZWESWi6WArjxl4cxg","processors":[{"is_enabled":true,"sources":["verbose"],"type":"date-remapper","name":"Define date"},{"is_enabled":true,"name":"processor from nested pipeline","expression":"(time1-time2)*1000","is_replace_missing":false,"type":"arithmetic-processor","target":"my_arithmetic"},{"is_enabled":true,"type":"category-processor","name":"Categorise severity level","categories":[{"filter":{"query":"@severity: \"-\""},"name":"verbose"},{"filter":{"query":"@severity: \".\""},"name":"debug"}],"target":"redis.severity"},{"is_enabled":true,"grok":{"support_rules":"date_parser %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}","match_rules":"rule %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}"},"name":"Parsing Stack traces","source":"message","samples":[],"type":"grok-parser"},{"is_enabled":true,"filter":{"query":"source:kafka"},"type":"pipeline","name":"my nested pipeline","processors":[{"is_enabled":true,"name":"Define url parser","sources":["http_test"],"target":"http_test.details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Define user agent parser","sources":["http_agent"],"is_encoded":false,"type":"user-agent-parser","target":"http_agent.details"}]},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"geo ip parse","sources":["ip1"],"type":"geo-ip-parser","target":"ip.address"},{"is_enabled":false,"name":"","source":"ip1","lookup_table":["key,value"],"type":"lookup-processor","target":"ip.address"},{"is_enabled":true,"name":"lookup processor with optional fields","source":"ip2","lookup_table":["key,value"],"default_lookup":"default","type":"lookup-processor","target":"ip.address"}]},{"is_enabled":true,"name":"sample pipeline update","filter":{"query":"source:foo"},"is_read_only":false,"type":"pipeline","id":"0mc2Xh9XTOKHDRooX8oU7Q","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"Rule %{word:my_word2} %{number:my_float2}"},"name":"sample grok parser","source":"message","samples":["Rule fooo 1.2"],"type":"grok-parser"},{"is_enabled":true,"sources":["msg"],"type":"message-remapper","name":"sample message remapper"}]},{"is_enabled":true,"name":"Web Browser logs","filter":{"query":"source:browser"},"is_read_only":true,"type":"pipeline","id":"cgS5obmTSi6NgGX05lf0tg","processors":[{"is_enabled":true,"name":"Parsing the backend endpoint url","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"name":"Parsing the url of the current page","sources":["view.url"],"target":"view.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Parsing the url of the previous page","sources":["view.referrer"],"target":"view.referrer_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"","sources":["network.client.ip"],"type":"geo-ip-parser","target":"network.client.geoip"}]},{"is_enabled":true,"name":"Java","filter":{"query":"source:java"},"is_read_only":true,"type":"pipeline","id":"JW6WRX6zSYO6P27n-R85vw","processors":[{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status %{word:level}\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2000-09-07 14:07:41,508 [main] INFO  MyApp - Entering application.","54 [main] INFO MyApp.foo.bar - Entering application.","2000-09-07 14:07:44 INFO org.foo.bar:32 - Entering application.","2000-09-07 14:07:44.452 [main] INFO org.foo.bar - Entering application."],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_gc_event_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\n_parallel \\[Parallel\\sTime:\\s%{number:parallel_time}\\sms,\\sGC\\sWorkers:\\s%{number:gc_worker.count}]\n\n_gc_worker_start \\[GC\\sWorker\\sStart\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.start.min},\\sAvg:\\s%{number:gc_worker.start.avg},\\sMax:\\s%{number:gc_worker.start.max},\\sDiff:\\s%{number:gc_worker.start.diff}]\n\n_ext_root_scanning \\[Ext\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:exit_root_scanning.min},\\sAvg:\\s%{number:exit_root_scanning.avg},\\sMax:\\s%{number:exit_root_scanning.max},\\sDiff:\\s%{number:exit_root_scanning.diff},\\sSum:\\s%{number:exit_root_scanning.sum}]\n\n_update_rs \\[Update\\sRS\\s\\(ms\\):\\sMin:\\s%{number:update_rs.min},\\sAvg:\\s%{number:update_rs.avg},\\sMax:\\s%{number:update_rs.max},\\sDiff:\\s%{number:update_rs.diff},\\sSum:\\s%{number:update_rs.sum}]\n\n_gcc_event %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}:%{notSpace}\\s\\[%{regex(\"([^\\\\]]*)\"):event.type}]\n\n_processed_buffer \\[Processed\\sBuffers:\\sMin:\\s%{number:processed_buffer.min},\\sAvg:\\s%{number:processed_buffer.avg},\\sMax:\\s%{number:processed_buffer.max},\\sDiff:\\s%{number:processed_buffer.diff},\\sSum:\\s%{number:processed_buffer.sum}]\n\n_scan_rs \\[Scan\\sRS\\s\\(ms\\):\\sMin:\\s%{number:scan_rs.min},\\sAvg:\\s%{number:scan_rs.avg},\\sMax:\\s%{number:scan_rs.max},\\sDiff:\\s%{number:scan_rs.diff},\\sSum:\\s%{number:scan_rs.sum}]\n\n_code_root_scan \\[Code\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:code_root.scan.min},\\sAvg:\\s%{number:code_root.scan.avg},\\sMax:\\s%{number:code_root.scan.max},\\sDiff:\\s%{number:code_root.scan.diff},\\sSum:\\s%{number:code_root.scan.sum}]\n\n_object_copy \\[Object\\sCopy\\s\\(ms\\):\\sMin:\\s%{number:object_copy.min},\\sAvg:\\s%{number:object_copy.avg},\\sMax:\\s%{number:object_copy.max},\\sDiff:\\s%{number:object_copy.diff},\\sSum:\\s%{number:object_copy.sum}]\n\n_termination \\[Termination\\s\\(ms\\):\\sMin:\\s%{number:termination.min},\\sAvg:\\s%{number:termination.avg},\\sMax:\\s%{number:termination.max},\\sDiff:\\s%{number:termination.diff},\\sSum:\\s%{number:termination.sum}]\n\n_termination_attempts \\[Termination\\sAttempts:\\sMin:\\s%{number:termination.attempts.min},\\sAvg:\\s%{number:termination.attempts.avg},\\sMax:\\s%{number:termination.attempts.max},\\sDiff:\\s%{number:termination.attempts.diff},\\sSum:\\s%{number:termination.attempts.sum}]\n\n_gc_worker_other \\[GC\\sWorker\\sOther\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.other.min},\\sAvg:\\s%{number:gc_worker.other.avg},\\sMax:\\s%{number:gc_worker.other.max},\\sDiff:\\s%{number:gc_worker.other.diff},\\sSum:\\s%{number:gc_worker.other.sum}]\n\n_gc_worker_total \\[GC\\sWorker\\sTotal\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.total.min},\\sAvg:\\s%{number:gc_worker.total.avg},\\sMax:\\s%{number:gc_worker.total.max},\\sDiff:\\s%{number:gc_worker.total.diff},\\sSum:\\s%{number:gc_worker.total.sum}]\n\n_gc_worker_end \\[GC\\sWorker\\sEnd\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.end.min},\\sAvg:\\s%{number:gc_worker.end.avg},\\sMax:\\s%{number:gc_worker.end.max},\\sDiff:\\s%{number:gc_worker.end.diff}]\n\n_code_root_fixup \\[Code\\sRoot\\sFixup:\\s%{number:code_root.fixup}\\sms]\n\n_code_root_purge \\[Code\\sRoot\\sPurge:\\s%{number:code_root.purge}\\sms]\n\n_clear_ct \\[Clear\\sCT:\\s%{number:clear_ct}\\sms]\n\n_other \\[Other:\\s%{number:other}\\sms]\n\n_choose_cset \\[Choose\\sCSet:\\s%{number:choose_cset}\\sms]\n\n_ref_proc \\[Ref\\sProc:\\s%{number:ref.proc}\\sms]\n\n_ref_enq \\[Ref\\sEnq:\\s%{number:ref.enq}\\sms]\n\n_redirty_cards \\[Redirty\\sCards:\\s%{number:redirty_cards}\\sms]\n\n_humongous_register \\[Humongous\\sRegister:\\s%{number:humongous_register}\\sms]\n\n_humongous_reclaim \\[Humongous\\sReclaim:\\s%{number:humongous_reclaim}\\sms]\n\n_free \\[Free\\sCSet:\\s%{number:free}\\sms]\n\n_memory_usage \\[Eden: (%{number:eden.memory_before}M|%{number:eden.memory_before:scale(1000)}G)\\((%{number:eden.memory_allocated_before}M|%{number:eden.memory_allocated_before:scale(1000)}G)\\)->%{number:eden.memory_after}B\\((%{number:eden.memory_allocated_after}M|%{number:eden.memory_allocated_after:scale(1000)}G)\\)\\sSurvivors:\\s%{number:survivor.memory_before}M->%{number:survivor.memory_after}M\\sHeap:\\s(%{number:heap.memory_before}M|%{number:heap.memory_before:scale(1000)}G)\\((%{number:heap.memory_allocated_before}M|%{number:heap.memory_allocated_before:scale(1000)}G)\\)->%{number:heap.memory_after}M\\((%{number:heap.memory_allocated_after}M|%{number:heap.memory_allocated_after:scale(1000)}G)\\)]\n\n_times \\[Times:\\suser=%{number:times.user}\\ssys=%{number:times.system},\\sreal=%{number:times.real}\\ssecs]\n","match_rules":"gc_nonverbose_basic \\[%{notSpace}\\]\\[%{word:level}\\s*\\]\\[%{word:gc.type}\\] GC\\(%{number:gc.iteration}\\) %{data:gc.action} \\(%{data:gc.phase}\\) %{number:heap.memory_before}M\\-\\>%{number:heap.memory_after}M\\(%{number:heap.memory_total}M\\) %{number:duration:scale(1000000)}ms\n\ngc_action_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\nnon_gc_action_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[%{regex(\"([^,]*)\"):gc.action}(,\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\ngc_verbose %{_gc_event_phase_duration}(\\r|\\n|\\s)*%{_parallel}(\\r|\\n|\\s)*%{_gc_worker_start}(\\r|\\n|\\s)*%{_ext_root_scanning}(\\r|\\n|\\s)*%{_update_rs}(\\r|\\n|\\s)*%{_processed_buffer}(\\r|\\n|\\s)*%{_scan_rs}(\\r|\\n|\\s)*%{_code_root_scan}(\\r|\\n|\\s)*%{_object_copy}(\\r|\\n|\\s)*%{_termination}(\\r|\\n|\\s)*%{_termination_attempts}(\\r|\\n|\\s)*%{_gc_worker_other}(\\r|\\n|\\s)*%{_gc_worker_total}(\\r|\\n|\\s)*%{_gc_worker_end}(\\r|\\n|\\s)*%{_code_root_fixup}(\\r|\\n|\\s)*%{_code_root_purge}(\\r|\\n|\\s)*%{_clear_ct}(\\r|\\n|\\s)*%{_other}(\\r|\\n|\\s)*%{_choose_cset}(\\r|\\n|\\s)*%{_ref_proc}(\\r|\\n|\\s)*%{_ref_enq}(\\r|\\n|\\s)*%{_redirty_cards}(\\r|\\n|\\s)*%{_humongous_register}(\\r|\\n|\\s)*%{_humongous_reclaim}(\\r|\\n|\\s)*%{_free}(\\r|\\n|\\s)*%{_memory_usage}(\\r|\\n|\\s)*%{_times}\n\n#Parse Java 11 GC logs formats\ngc_new_format \\[%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}\\]\\[%{notSpace:status}\\]\\[%{notSpace:gc.type}(\\s)?\\]\\sGC\\(%{number:gc.iteration}\\)\\s%{data:gc.action}(\\s%{number:duration:scale(1000000)}ms)?\n"},"name":"Parsing GC logs","source":"message","samples":["[9237.485s][info   ][gc] GC(835) Pause Young (G1 Evacuation Pause) 4937M->645M(7168M) 17.476ms","2019-03-20T14:36:30.111+0000: 41.098: [GC concurrent-mark-end, 0.0272767 secs]","2019-03-20T14:36:30.111+0000: 41.071: [GC concurrent-mark-start]","2019-03-20T14:36:30.111+0000: 41.099: [Finalize Marking, 0.0011661 secs]"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `stack_trace` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger_name","loggerName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger_name`, `loggerName` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread_name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread_name` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Java Stack traces","source":"error.stack","samples":["java.lang.NullPointerException: this is my error message\n at com.hello.world.flow.Checker.checkCacheEntryyy(Checker.java: 154)\n"],"type":"grok-parser"},{"is_enabled":true,"name":"Calculate GC memory freed","expression":"(heap.memory_before - heap.memory_after)","is_replace_missing":false,"type":"arithmetic-processor","target":"gc.memory_freed"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env","contextMap.dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env`, `contextMap.dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version","contextMap.dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version`, `contextMap.dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service","contextMap.dd.service"],"type":"service-remapper","name":"Define `dd.service`, `contextMap.dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"Datadog Agent","filter":{"query":"source:(agent OR datadog-agent OR datadog-agent-cluster-worker OR datadog-cluster-agent OR process-agent OR security-agent OR system-probe OR trace-agent OR cluster-agent)"},"is_read_only":true,"type":"pipeline","id":"4I6FNy5GToqi2fKVAqNZJw","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"agent_rule         %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\) \\|( %{data::keyvalue(\":\")} \\|)?( - \\|)?( \\(%{notSpace:pyFilename}:%{number:pyLineno}\\) \\|)?%{data}\nagent_rule_pre_611 %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\)%{data}\njmxfetch_rule      %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level}\\s+\\| %{word:class} \\| %{data}\n"},"name":"Parsing Datadog Agent logs","source":"message","samples":["2020-07-01 09:48:14 UTC | CORE | INFO | (pkg/collector/runner/runner.go:327 in work) | check:network,type:core | Done running check","2020-09-15 10:00:07 UTC | CORE | INFO | (pkg/collector/python/datadog_agent.go:120 in LogMessage) | kafka_cluster_status:8ca7b736f0aa43e5 | (kafka_cluster_status.py:213) | Checking for out of sync partition replicas","2019-04-08 13:53:48 UTC | TRACE | INFO | (pkg/trace/agent/agent.go:145 in loop) | exiting","2019-02-01 16:59:41 UTC | INFO | (connection_manager.go:124 in CloseConnection) | Connection closed","2020-11-18 10:31:13 UTC | JMX | INFO  | App | Successfully initialized instance: cassandra-localhost-7199"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"}]},{"is_enabled":true,"name":"test-oneof","filter":{"query":"kube_deployment:synthetics-* OR service:synthetics* OR service:ingress-haproxy-synthetics"},"is_read_only":false,"type":"pipeline","id":"zpVyok_OSzWrvV38NS-YAA","processors":[{"is_enabled":true,"filter":{"query":"source:go OR log_format:dd-go-std"},"type":"pipeline","name":"oneof go","processors":[]},{"is_enabled":true,"override_on_conflict":false,"target":"synthetics_test_url.host","source_type":"attribute","target_type":"attribute","sources":["host"],"preserve_source":true,"type":"attribute-remapper","name":"oneof processor"}]},{"is_enabled":true,"name":"Sinatra","filter":{"query":"source:sinatra"},"is_read_only":true,"type":"pipeline","id":"vL--Mbs7SceY84ADEYu40w","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access (%{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}|%{date(\"dd/MMM/yyyy HH:mm:ss\"):date_access})\n_duration %{number:duration:scale(1000000000)}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)( %{_duration}|-)?\n"},"name":"Parsing Sinatra logs","source":"message","samples":["127.0.0.1 - - [15/Jul/2018:17:41:40 +0000] \"GET /uptime_status HTTP/1.1\" 200 34 0.0004","127.0.0.1 - - [15/Jul/2018 23:40:31] \"GET /uptime_status HTTP/1.1\" 200 6997 1.8096"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category"],"type":"status-remapper","name":"Define `http.status_category` as the official status of the log"}]},{"is_enabled":true,"name":"Nginx","filter":{"query":"source:nginx"},"is_read_only":true,"type":"pipeline","id":"RSbXaJxLS8WSZbAV6vJnYg","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_user_agent %{regex(\"[^\\\\\\\"]*\"):http.useragent}\n_referer %{notSpace:http.referer}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access %{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}\n_x_forwarded_for %{regex(\"[^\\\\\\\"]*\"):http._x_forwarded_for:nullIf(\"-\")}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)\n\naccess.combined %{access.common} (%{number:duration:scale(1000000000)} )?\"%{_referer}\" \"%{_user_agent}\"( \"%{_x_forwarded_for}\")?.*\n\nerror.format %{date(\"yyyy/MM/dd HH:mm:ss\"):date_access} \\[%{word:level}\\] %{data:error.message}(, %{data::keyvalue(\": \",\",\")})?\n"},"name":"Parsing Nginx logs","source":"message","samples":["127.0.0.1 - frank [13/Jul/2016:10:55:36 +0000] \"GET /apache_pb.gif HTTP/1.0\" 200 2326","172.17.0.1 - - [06/Jan/2017:16:16:37 +0000] \"GET /datadoghq/company?test=var1%20Pl HTTP/1.1\" 200 612 \"http://www.perdu.com/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36\" \"-\"","2017/09/26 14:36:50 [error] 8409#8409: *317058 \"/usr/share/nginx/html/sql/sql-admin/index.html\" is not found (2: No such file or directory), client: 217.92.148.44, server: localhost, request: \"HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1\", host: \"174.138.82.103\""],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"network.client.ip","source_type":"attribute","target_type":"attribute","sources":["client"],"preserve_source":false,"type":"attribute-remapper","name":"Map `client` to `network.client.ip`"},{"is_enabled":true,"grok":{"support_rules":"_method %{word:http.method}\n_url %{notSpace:http.url}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n","match_rules":"request_parsing (?>%{_method} |)%{_url}(?> %{_version}|)\n"},"name":"Parsing Nginx Error log requests","source":"request","samples":["HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category","level"],"type":"status-remapper","name":"Define `http.status_category`, `level` as the official status of the log"}]},{"is_enabled":false,"name":"Jenkins","filter":{"query":"source:jenkins service:jenkins"},"is_read_only":false,"type":"pipeline","id":"LWIrk9TLT3Kp9hnIbWBs2w","processors":[{"is_enabled":true,"filter":{"query":"@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Main Logs","processors":[{"is_enabled":false,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss.SSS+0000\"):date}\n_id \\[id\\=%{integer:id}\\]\n_level %{word:level}\n_logger (\\w+|\\.)+?%{regex(\"([a-zA-Z0-9]+[.][a-zA-Z0-9]+)\"):logger.name}\\#%{data:logger.label}\n_message %{data:message}\n","match_rules":"rule %{_date}\\s+%{_id}\\s+%{_level}\\s+%{_logger}\\:\\s+%{_message}"},"name":"parse the log message","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status (%{word:level}|\\[%{word:level}\\s*\\])\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+(\\(%{_logger_name}:%{_line}\\)|%{_logger_name})\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_custom_jenkins (%{_date}|%{_date_ms}|%{_date_slf4j})(\\+0000)?\\s+\\[(id=)?%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}:\\s+?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"}]},{"is_enabled":true,"filter":{"query":"-@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Job Logs","processors":[{"is_enabled":true,"grok":{"support_rules":"_job %{data:jenkins.job}\n_build %{data:jenkins.build}\n","match_rules":"pipeline_job_rule /var/lib/jenkins/jobs/pipeline/jobs/%{data:jenkins.pipeline}/jobs/%{_job}/builds/%{_build}/log\nnon_pipeline_job_rule /var/lib/jenkins/jobs/%{_job}/builds/%{_build}/log\n"},"name":"parse tailed_path","source":"tailed_path","samples":["/var/lib/jenkins/jobs/pipeline/jobs/admin/jobs/venmo-platform-pr-controller/builds/52228/log","/var/lib/jenkins/jobs/pipeline/jobs/default/jobs/venmo-platform-pr-foundation-swagger-missing-descriptions/builds/5210/log","/var/lib/jenkins/jobs/update_datadog_metrics/builds/49760/log"],"type":"grok-parser"}]}]},{"is_enabled":true,"name":"Ruby","filter":{"query":"source:ruby"},"is_read_only":true,"type":"pipeline","id":"TL1aouiMTNmpCCN1iZxoSA","processors":[{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread` to `logger.thread_name`"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["exception","stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `exception`, `stack_trace` to `error.stack`"},{"is_enabled":true,"grok":{"support_rules":"_date (?:%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSSSS\"):date}|%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSS\"):date})\n_status %{word:level}\n_thread_id %{word:logger.thread_id}\n_thread_name %{notSpace:logger.thread_name}\n_logger_name %{notSpace:logger.name}\n_ruby_log_prefix %{word}, \\[%{_date} #%{_thread_id}\\]\\s+%{_status}\\s+--\\s+(?:%{_logger_name})?:(?:\\s+%{_trace_rule})?\n_trace_rule \\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\]\n_datadog_prefix \\[%{date(\"yyyy-MM-dd HH:mm:ss Z\"):date}\\]\\[%{word:application}\\]\\[%{_status}\\]%{_trace_rule}\n_activate_status %{word:active_directory.process_status}\n","match_rules":"# Active Directory Rails logs\n\ncompleted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{integer:http.status_code}(?: (?:%{word}|Internal Server Error))? in %{number:duration}ms \\((?>Views: %{number:views}ms \\| )?ActiveRecord: %{number:activerecord}ms\\)\n\nprocessing_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} by %{notSpace:processor}.*\n\nstarted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{word:http.method} \"%{notSpace:http.url_details.path}\" for %{ipOrHost:network.client.ip}.*\n\ndatadog_format %{_datadog_prefix} %{data::keyvalue(\"=\",\"/\")}(?>(\\n|\\t)%{data:error.stack})?\n\nreceived_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?Received: %{data::json}\n\n## Default Ruby formats\nRuby_default %{_ruby_log_prefix}\\s+%{data:error.message}(?>(\\n|\\t)%{data:error.stack})?\n\nRuby_keyvalue %{data::keyvalue(\"=\",\"/\")}\n\n# Extra samples:\n#I, [1999-03-03T02:34:24.895701 #19074]  INFO -- Main: Some error.\n## Datadog Format\n#[dd.trace_id=1321281354128614668 dd.span_id=5986620922286636160] Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.0ms)\n"},"name":"Parsing Ruby Default formats","source":"message","samples":["I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 6.2ms)","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Started GET \"/api/v1/example/query\" for 123.123.123.123 at 1999-03-03 02:34:24+0000","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Processing by MyCheck::CheckController#index as JSON","I, [2018-06-27T08:01:52.991728 #1]  INFO -- : Received: {\"action\":\"cancel\",\"order\":{\"id\":1234567,\"timestamp\":153012312}}","[2019-01-16 15:38:45 +0000][my_app][WARN][dd.trace_id=7396234561907730428 dd.span_id=1152346429682372911] This is a test message!"],"type":"grok-parser"},{"is_enabled":true,"sources":["date"],"type":"date-remapper","name":"Define `date` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Stack trace","source":"error.stack","samples":["ZeroDivisionError: divided by 0\nfrom devide.rb:6:in `divide`  \nfrom devide.rb:14:in `call`\nfrom devide.rb:18:in `<main>`\n"],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"http.method","source_type":"attribute","target_type":"attribute","sources":["method"],"preserve_source":false,"type":"attribute-remapper","name":"Map `method` to `http.method`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.url_details.path","source_type":"attribute","target_type":"attribute","sources":["path"],"preserve_source":false,"type":"attribute-remapper","name":"Map `path` to `http.url_details.path`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.status_code","source_type":"attribute","target_type":"attribute","sources":["status"],"preserve_source":false,"type":"attribute-remapper","name":"Map `status` to `http.status_code`"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"},{"is_enabled":true,"name":"Convert duration unit ms to ns","expression":"duration*1000000","is_replace_missing":false,"type":"arithmetic-processor","target":"duration"}]}]
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines
    method: GET
  response:
    body: |
      [{"is_enabled":true,"name":"python","filter":{"query":"source:python"},"is_read_only":true,"type":"pipeline","id":"rTxbr2MpQsSCEtn66XmwnQ","processors":[{"is_enabled":true,"grok":{"support_rules":"_datadog_prefix (%{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}|%{date(\"yyyy-MM-dd H:mm:ss,SSS\"):timestamp}) %{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{notSpace:filename}:%{number:lineno}\\]\\s+\\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\] -\n\n_python_prefix %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{integer:process.id}\\]\n","match_rules":"traceback_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}Traceback \\(most recent call last\\):(?s)\\s*%{data:error.stack}\n\npython_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}\n\npython_fallback %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+%{data::keyvalue}((\\n|\\t)%{data:error.stack})?\n\n#Samples\n#2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log\n\n# Datadog format\n#2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext\n"},"name":"Parsing python default format","source":"message","samples":["2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log","2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext","2020-03-20 14:15:07,124 INFO [root] [app.py:78] [dd.service=excelsior dd.env=prod dd.version=abc123 dd.trace_id=9659687005038611690 dd.span_id=6632586210846541907] - This is a test of info logs","2021-07-09 8:58:31,137 WARNING [root] [views.py:42] [dd.service=datadoggo dd.env=prod dd.version=abc546 dd.trace_id=2296056412404370861 dd.span_id=16818077145337196836] - New post view.","2017-12-26T10:44:59,311 ERROR [dd.dogweb.lib.static_asset] [20081] rid=b0RV4J Error reading statics_version file.Traceback (most recent call last): File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["levelname"],"type":"status-remapper","name":"Define `levelname` as the official status of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["traceback"],"preserve_source":false,"type":"attribute-remapper","name":"Map `traceback` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `name` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["threadName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `threadName` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"parsing_traceback File \"%{notSpace:filename}\", line %{integer:lineno}.*\\s+%{regex(\"[a-zA-Z]*Error[a-zA-Z]*\"):error.kind}: %{data:error.message}\n"},"name":"Parsing python traceback","source":"error.stack","samples":["File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"my first pipeline","filter":{"query":"source:redis"},"is_read_only":false,"type":"pipeline","id":"2QGdoZWESWi6WArjxl4cxg","processors":[{"is_enabled":true,"sources":["verbose"],"type":"date-remapper","name":"Define date"},{"is_enabled":true,"name":"processor from nested pipeline","expression":"(time1-time2)*1000","is_replace_missing":false,"type":"arithmetic-processor","target":"my_arithmetic"},{"is_enabled":true,"type":"category-processor","name":"Categorise severity level","categories":[{"filter":{"query":"@severity: \"-\""},"name":"verbose"},{"filter":{"query":"@severity: \".\""},"name":"debug"}],"target":"redis.severity"},{"is_enabled":true,"grok":{"support_rules":"date_parser %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}","match_rules":"rule %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}"},"name":"Parsing Stack traces","source":"message","samples":[],"type":"grok-parser"},{"is_enabled":true,"filter":{"query":"source:kafka"},"type":"pipeline","name":"my nested pipeline","processors":[{"is_enabled":true,"name":"Define url parser","sources":["http_test"],"target":"http_test.details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Define user agent parser","sources":["http_agent"],"is_encoded":false,"type":"user-agent-parser","target":"http_agent.details"}]},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"geo ip parse","sources":["ip1"],"type":"geo-ip-parser","target":"ip.address"},{"is_enabled":false,"name":"","source":"ip1","lookup_table":["key,value"],"type":"lookup-processor","target":"ip.address"},{"is_enabled":true,"name":"lookup processor with optional fields","source":"ip2","lookup_table":["key,value"],"default_lookup":"default","type":"lookup-processor","target":"ip.address"}]},{"is_enabled":true,"name":"sample pipeline update","filter":{"query":"source:foo"},"is_read_only":false,"type":"pipeline","id":"0mc2Xh9XTOKHDRooX8oU7Q","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"Rule %{word:my_word2} %{number:my_float2}"},"name":"sample grok parser","source":"message","samples":["Rule fooo 1.2"],"type":"grok-parser"},{"is_enabled":true,"sources":["msg"],"type":"message-remapper","name":"sample message remapper"}]},{"is_enabled":true,"name":"Web Browser logs","filter":{"query":"source:browser"},"is_read_only":true,"type":"pipeline","id":"cgS5obmTSi6NgGX05lf0tg","processors":[{"is_enabled":true,"name":"Parsing the backend endpoint url","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"name":"Parsing the url of the current page","sources":["view.url"],"target":"view.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Parsing the url of the previous page","sources":["view.referrer"],"target":"view.referrer_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"","sources":["network.client.ip"],"type":"geo-ip-parser","target":"network.client.geoip"}]},{"is_enabled":true,"name":"Java","filter":{"query":"source:java"},"is_read_only":true,"type":"pipeline","id":"JW6WRX6zSYO6P27n-R85vw","processors":[{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status %{word:level}\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2000-09-07 14:07:41,508 [main] INFO  MyApp - Entering application.","54 [main] INFO MyApp.foo.bar - Entering application.","2000-09-07 14:07:44 INFO org.foo.bar:32 - Entering application.","2000-09-07 14:07:44.452 [main] INFO org.foo.bar - Entering application."],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_gc_event_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\n_parallel \\[Parallel\\sTime:\\s%{number:parallel_time}\\sms,\\sGC\\sWorkers:\\s%{number:gc_worker.count}]\n\n_gc_worker_start \\[GC\\sWorker\\sStart\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.start.min},\\sAvg:\\s%{number:gc_worker.start.avg},\\sMax:\\s%{number:gc_worker.start.max},\\sDiff:\\s%{number:gc_worker.start.diff}]\n\n_ext_root_scanning \\[Ext\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:exit_root_scanning.min},\\sAvg:\\s%{number:exit_root_scanning.avg},\\sMax:\\s%{number:exit_root_scanning.max},\\sDiff:\\s%{number:exit_root_scanning.diff},\\sSum:\\s%{number:exit_root_scanning.sum}]\n\n_update_rs \\[Update\\sRS\\s\\(ms\\):\\sMin:\\s%{number:update_rs.min},\\sAvg:\\s%{number:update_rs.avg},\\sMax:\\s%{number:update_rs.max},\\sDiff:\\s%{number:update_rs.diff},\\sSum:\\s%{number:update_rs.sum}]\n\n_gcc_event %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}:%{notSpace}\\s\\[%{regex(\"([^\\\\]]*)\"):event.type}]\n\n_processed_buffer \\[Processed\\sBuffers:\\sMin:\\s%{number:processed_buffer.min},\\sAvg:\\s%{number:processed_buffer.avg},\\sMax:\\s%{number:processed_buffer.max},\\sDiff:\\s%{number:processed_buffer.diff},\\sSum:\\s%{number:processed_buffer.sum}]\n\n_scan_rs \\[Scan\\sRS\\s\\(ms\\):\\sMin:\\s%{number:scan_rs.min},\\sAvg:\\s%{number:scan_rs.avg},\\sMax:\\s%{number:scan_rs.max},\\sDiff:\\s%{number:scan_rs.diff},\\sSum:\\s%{number:scan_rs.sum}]\n\n_code_root_scan \\[Code\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:code_root.scan.min},\\sAvg:\\s%{number:code_root.scan.avg},\\sMax:\\s%{number:code_root.scan.max},\\sDiff:\\s%{number:code_root.scan.diff},\\sSum:\\s%{number:code_root.scan.sum}]\n\n_object_copy \\[Object\\sCopy\\s\\(ms\\):\\sMin:\\s%{number:object_copy.min},\\sAvg:\\s%{number:object_copy.avg},\\sMax:\\s%{number:object_copy.max},\\sDiff:\\s%{number:object_copy.diff},\\sSum:\\s%{number:object_copy.sum}]\n\n_termination \\[Termination\\s\\(ms\\):\\sMin:\\s%{number:termination.min},\\sAvg:\\s%{number:termination.avg},\\sMax:\\s%{number:termination.max},\\sDiff:\\s%{number:termination.diff},\\sSum:\\s%{number:termination.sum}]\n\n_termination_attempts \\[Termination\\sAttempts:\\sMin:\\s%{number:termination.attempts.min},\\sAvg:\\s%{number:termination.attempts.avg},\\sMax:\\s%{number:termination.attempts.max},\\sDiff:\\s%{number:termination.attempts.diff},\\sSum:\\s%{number:termination.attempts.sum}]\n\n_gc_worker_other \\[GC\\sWorker\\sOther\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.other.min},\\sAvg:\\s%{number:gc_worker.other.avg},\\sMax:\\s%{number:gc_worker.other.max},\\sDiff:\\s%{number:gc_worker.other.diff},\\sSum:\\s%{number:gc_worker.other.sum}]\n\n_gc_worker_total \\[GC\\sWorker\\sTotal\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.total.min},\\sAvg:\\s%{number:gc_worker.total.avg},\\sMax:\\s%{number:gc_worker.total.max},\\sDiff:\\s%{number:gc_worker.total.diff},\\sSum:\\s%{number:gc_worker.total.sum}]\n\n_gc_worker_end \\[GC\\sWorker\\sEnd\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.end.min},\\sAvg:\\s%{number:gc_worker.end.avg},\\sMax:\\s%{number:gc_worker.end.max},\\sDiff:\\s%{number:gc_worker.end.diff}]\n\n_code_root_fixup \\[Code\\sRoot\\sFixup:\\s%{number:code_root.fixup}\\sms]\n\n_code_root_purge \\[Code\\sRoot\\sPurge:\\s%{number:code_root.purge}\\sms]\n\n_clear_ct \\[Clear\\sCT:\\s%{number:clear_ct}\\sms]\n\n_other \\[Other:\\s%{number:other}\\sms]\n\n_choose_cset \\[Choose\\sCSet:\\s%{number:choose_cset}\\sms]\n\n_ref_proc \\[Ref\\sProc:\\s%{number:ref.proc}\\sms]\n\n_ref_enq \\[Ref\\sEnq:\\s%{number:ref.enq}\\sms]\n\n_redirty_cards \\[Redirty\\sCards:\\s%{number:redirty_cards}\\sms]\n\n_humongous_register \\[Humongous\\sRegister:\\s%{number:humongous_register}\\sms]\n\n_humongous_reclaim \\[Humongous\\sReclaim:\\s%{number:humongous_reclaim}\\sms]\n\n_free \\[Free\\sCSet:\\s%{number:free}\\sms]\n\n_memory_usage \\[Eden: (%{number:eden.memory_before}M|%{number:eden.memory_before:scale(1000)}G)\\((%{number:eden.memory_allocated_before}M|%{number:eden.memory_allocated_before:scale(1000)}G)\\)->%{number:eden.memory_after}B\\((%{number:eden.memory_allocated_after}M|%{number:eden.memory_allocated_after:scale(1000)}G)\\)\\sSurvivors:\\s%{number:survivor.memory_before}M->%{number:survivor.memory_after}M\\sHeap:\\s(%{number:heap.memory_before}M|%{number:heap.memory_before:scale(1000)}G)\\((%{number:heap.memory_allocated_before}M|%{number:heap.memory_allocated_before:scale(1000)}G)\\)->%{number:heap.memory_after}M\\((%{number:heap.memory_allocated_after}M|%{number:heap.memory_allocated_after:scale(1000)}G)\\)]\n\n_times \\[Times:\\suser=%{number:times.user}\\ssys=%{number:times.system},\\sreal=%{number:times.real}\\ssecs]\n","match_rules":"gc_nonverbose_basic \\[%{notSpace}\\]\\[%{word:level}\\s*\\]\\[%{word:gc.type}\\] GC\\(%{number:gc.iteration}\\) %{data:gc.action} \\(%{data:gc.phase}\\) %{number:heap.memory_before}M\\-\\>%{number:heap.memory_after}M\\(%{number:heap.memory_total}M\\) %{number:duration:scale(1000000)}ms\n\ngc_action_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\nnon_gc_action_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[%{regex(\"([^,]*)\"):gc.action}(,\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\ngc_verbose %{_gc_event_phase_duration}(\\r|\\n|\\s)*%{_parallel}(\\r|\\n|\\s)*%{_gc_worker_start}(\\r|\\n|\\s)*%{_ext_root_scanning}(\\r|\\n|\\s)*%{_update_rs}(\\r|\\n|\\s)*%{_processed_buffer}(\\r|\\n|\\s)*%{_scan_rs}(\\r|\\n|\\s)*%{_code_root_scan}(\\r|\\n|\\s)*%{_object_copy}(\\r|\\n|\\s)*%{_termination}(\\r|\\n|\\s)*%{_termination_attempts}(\\r|\\n|\\s)*%{_gc_worker_other}(\\r|\\n|\\s)*%{_gc_worker_total}(\\r|\\n|\\s)*%{_gc_worker_end}(\\r|\\n|\\s)*%{_code_root_fixup}(\\r|\\n|\\s)*%{_code_root_purge}(\\r|\\n|\\s)*%{_clear_ct}(\\r|\\n|\\s)*%{_other}(\\r|\\n|\\s)*%{_choose_cset}(\\r|\\n|\\s)*%{_ref_proc}(\\r|\\n|\\s)*%{_ref_enq}(\\r|\\n|\\s)*%{_redirty_cards}(\\r|\\n|\\s)*%{_humongous_register}(\\r|\\n|\\s)*%{_humongous_reclaim}(\\r|\\n|\\s)*%{_free}(\\r|\\n|\\s)*%{_memory_usage}(\\r|\\n|\\s)*%{_times}\n\n#Parse Java 11 GC logs formats\ngc_new_format \\[%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}\\]\\[%{notSpace:status}\\]\\[%{notSpace:gc.type}(\\s)?\\]\\sGC\\(%{number:gc.iteration}\\)\\s%{data:gc.action}(\\s%{number:duration:scale(1000000)}ms)?\n"},"name":"Parsing GC logs","source":"message","samples":["[9237.485s][info   ][gc] GC(835) Pause Young (G1 Evacuation Pause) 4937M->645M(7168M) 17.476ms","2019-03-20T14:36:30.111+0000: 41.098: [GC concurrent-mark-end, 0.0272767 secs]","2019-03-20T14:36:30.111+0000: 41.071: [GC concurrent-mark-start]","2019-03-20T14:36:30.111+0000: 41.099: [Finalize Marking, 0.0011661 secs]"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `stack_trace` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger_name","loggerName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger_name`, `loggerName` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread_name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread_name` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Java Stack traces","source":"error.stack","samples":["java.lang.NullPointerException: this is my error message\n at com.hello.world.flow.Checker.checkCacheEntryyy(Checker.java: 154)\n"],"type":"grok-parser"},{"is_enabled":true,"name":"Calculate GC memory freed","expression":"(heap.memory_before - heap.memory_after)","is_replace_missing":false,"type":"arithmetic-processor","target":"gc.memory_freed"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env","contextMap.dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env`, `contextMap.dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version","contextMap.dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version`, `contextMap.dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service","contextMap.dd.service"],"type":"service-remapper","name":"Define `dd.service`, `contextMap.dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"Datadog Agent","filter":{"query":"source:(agent OR datadog-agent OR datadog-agent-cluster-worker OR datadog-cluster-agent OR process-agent OR security-agent OR system-probe OR trace-agent OR cluster-agent)"},"is_read_only":true,"type":"pipeline","id":"4I6FNy5GToqi2fKVAqNZJw","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"agent_rule         %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\) \\|( %{data::keyvalue(\":\")} \\|)?( - \\|)?( \\(%{notSpace:pyFilename}:%{number:pyLineno}\\) \\|)?%{data}\nagent_rule_pre_611 %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\)%{data}\njmxfetch_rule      %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level}\\s+\\| %{word:class} \\| %{data}\n"},"name":"Parsing Datadog Agent logs","source":"message","samples":["2020-07-01 09:48:14 UTC | CORE | INFO | (pkg/collector/runner/runner.go:327 in work) | check:network,type:core | Done running check","2020-09-15 10:00:07 UTC | CORE | INFO | (pkg/collector/python/datadog_agent.go:120 in LogMessage) | kafka_cluster_status:8ca7b736f0aa43e5 | (kafka_cluster_status.py:213) | Checking for out of sync partition replicas","2019-04-08 13:53:48 UTC | TRACE | INFO | (pkg/trace/agent/agent.go:145 in loop) | exiting","2019-02-01 16:59:41 UTC | INFO | (connection_manager.go:124 in CloseConnection) | Connection closed","2020-11-18 10:31:13 UTC | JMX | INFO  | App | Successfully initialized instance: cassandra-localhost-7199"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"}]},{"is_enabled":true,"name":"test-oneof","filter":{"query":"kube_deployment:synthetics-* OR service:synthetics* OR service:ingress-haproxy-synthetics"},"is_read_only":false,"type":"pipeline","id":"zpVyok_OSzWrvV38NS-YAA","processors":[{"is_enabled":true,"filter":{"query":"source:go OR log_format:dd-go-std"},"type":"pipeline","name":"oneof go","processors":[]},{"is_enabled":true,"override_on_conflict":false,"target":"synthetics_test_url.host","source_type":"attribute","target_type":"attribute","sources":["host"],"preserve_source":true,"type":"attribute-remapper","name":"oneof processor"}]},{"is_enabled":true,"name":"Sinatra","filter":{"query":"source:sinatra"},"is_read_only":true,"type":"pipeline","id":"vL--Mbs7SceY84ADEYu40w","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access (%{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}|%{date(\"dd/MMM/yyyy HH:mm:ss\"):date_access})\n_duration %{number:duration:scale(1000000000)}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)( %{_duration}|-)?\n"},"name":"Parsing Sinatra logs","source":"message","samples":["127.0.0.1 - - [15/Jul/2018:17:41:40 +0000] \"GET /uptime_status HTTP/1.1\" 200 34 0.0004","127.0.0.1 - - [15/Jul/2018 23:40:31] \"GET /uptime_status HTTP/1.1\" 200 6997 1.8096"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category"],"type":"status-remapper","name":"Define `http.status_category` as the official status of the log"}]},{"is_enabled":true,"name":"Nginx","filter":{"query":"source:nginx"},"is_read_only":true,"type":"pipeline","id":"RSbXaJxLS8WSZbAV6vJnYg","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_user_agent %{regex(\"[^\\\\\\\"]*\"):http.useragent}\n_referer %{notSpace:http.referer}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access %{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}\n_x_forwarded_for %{regex(\"[^\\\\\\\"]*\"):http._x_forwarded_for:nullIf(\"-\")}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)\n\naccess.combined %{access.common} (%{number:duration:scale(1000000000)} )?\"%{_referer}\" \"%{_user_agent}\"( \"%{_x_forwarded_for}\")?.*\n\nerror.format %{date(\"yyyy/MM/dd HH:mm:ss\"):date_access} \\[%{word:level}\\] %{data:error.message}(, %{data::keyvalue(\": \",\",\")})?\n"},"name":"Parsing Nginx logs","source":"message","samples":["127.0.0.1 - frank [13/Jul/2016:10:55:36 +0000] \"GET /apache_pb.gif HTTP/1.0\" 200 2326","172.17.0.1 - - [06/Jan/2017:16:16:37 +0000] \"GET /datadoghq/company?test=var1%20Pl HTTP/1.1\" 200 612 \"http://www.perdu.com/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36\" \"-\"","2017/09/26 14:36:50 [error] 8409#8409: *317058 \"/usr/share/nginx/html/sql/sql-admin/index.html\" is not found (2: No such file or directory), client: 217.92.148.44, server: localhost, request: \"HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1\", host: \"174.138.82.103\""],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"network.client.ip","source_type":"attribute","target_type":"attribute","sources":["client"],"preserve_source":false,"type":"attribute-remapper","name":"Map `client` to `network.client.ip`"},{"is_enabled":true,"grok":{"support_rules":"_method %{word:http.method}\n_url %{notSpace:http.url}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n","match_rules":"request_parsing (?>%{_method} |)%{_url}(?> %{_version}|)\n"},"name":"Parsing Nginx Error log requests","source":"request","samples":["HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category","level"],"type":"status-remapper","name":"Define `http.status_category`, `level` as the official status of the log"}]},{"is_enabled":false,"name":"Jenkins","filter":{"query":"source:jenkins service:jenkins"},"is_read_only":false,"type":"pipeline","id":"LWIrk9TLT3Kp9hnIbWBs2w","processors":[{"is_enabled":true,"filter":{"query":"@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Main Logs","processors":[{"is_enabled":false,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss.SSS+0000\"):date}\n_id \\[id\\=%{integer:id}\\]\n_level %{word:level}\n_logger (\\w+|\\.)+?%{regex(\"([a-zA-Z0-9]+[.][a-zA-Z0-9]+)\"):logger.name}\\#%{data:logger.label}\n_message %{data:message}\n","match_rules":"rule %{_date}\\s+%{_id}\\s+%{_level}\\s+%{_logger}\\:\\s+%{_message}"},"name":"parse the log message","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status (%{word:level}|\\[%{word:level}\\s*\\])\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+(\\(%{_logger_name}:%{_line}\\)|%{_logger_name})\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_custom_jenkins (%{_date}|%{_date_ms}|%{_date_slf4j})(\\+0000)?\\s+\\[(id=)?%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}:\\s+?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"}]},{"is_enabled":true,"filter":{"query":"-@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Job Logs","processors":[{"is_enabled":true,"grok":{"support_rules":"_job %{data:jenkins.job}\n_build %{data:jenkins.build}\n","match_rules":"pipeline_job_rule /var/lib/jenkins/jobs/pipeline/jobs/%{data:jenkins.pipeline}/jobs/%{_job}/builds/%{_build}/log\nnon_pipeline_job_rule /var/lib/jenkins/jobs/%{_job}/builds/%{_build}/log\n"},"name":"parse tailed_path","source":"tailed_path","samples":["/var/lib/jenkins/jobs/pipeline/jobs/admin/jobs/venmo-platform-pr-controller/builds/52228/log","/var/lib/jenkins/jobs/pipeline/jobs/default/jobs/venmo-platform-pr-foundation-swagger-missing-descriptions/builds/5210/log","/var/lib/jenkins/jobs/update_datadog_metrics/builds/49760/log"],"type":"grok-parser"}]}]},{"is_enabled":true,"name":"Ruby","filter":{"query":"source:ruby"},"is_read_only":true,"type":"pipeline","id":"TL1aouiMTNmpCCN1iZxoSA","processors":[{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread` to `logger.thread_name`"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["exception","stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `exception`, `stack_trace` to `error.stack`"},{"is_enabled":true,"grok":{"support_rules":"_date (?:%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSSSS\"):date}|%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSS\"):date})\n_status %{word:level}\n_thread_id %{word:logger.thread_id}\n_thread_name %{notSpace:logger.thread_name}\n_logger_name %{notSpace:logger.name}\n_ruby_log_prefix %{word}, \\[%{_date} #%{_thread_id}\\]\\s+%{_status}\\s+--\\s+(?:%{_logger_name})?:(?:\\s+%{_trace_rule})?\n_trace_rule \\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\]\n_datadog_prefix \\[%{date(\"yyyy-MM-dd HH:mm:ss Z\"):date}\\]\\[%{word:application}\\]\\[%{_status}\\]%{_trace_rule}\n_activate_status %{word:active_directory.process_status}\n","match_rules":"# Active Directory Rails logs\n\ncompleted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{integer:http.status_code}(?: (?:%{word}|Internal Server Error))? in %{number:duration}ms \\((?>Views: %{number:views}ms \\| )?ActiveRecord: %{number:activerecord}ms\\)\n\nprocessing_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} by %{notSpace:processor}.*\n\nstarted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{word:http.method} \"%{notSpace:http.url_details.path}\" for %{ipOrHost:network.client.ip}.*\n\ndatadog_format %{_datadog_prefix} %{data::keyvalue(\"=\",\"/\")}(?>(\\n|\\t)%{data:error.stack})?\n\nreceived_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?Received: %{data::json}\n\n## Default Ruby formats\nRuby_default %{_ruby_log_prefix}\\s+%{data:error.message}(?>(\\n|\\t)%{data:error.stack})?\n\nRuby_keyvalue %{data::keyvalue(\"=\",\"/\")}\n\n# Extra samples:\n#I, [1999-03-03T02:34:24.895701 #19074]  INFO -- Main: Some error.\n## Datadog Format\n#[dd.trace_id=1321281354128614668 dd.span_id=5986620922286636160] Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.0ms)\n"},"name":"Parsing Ruby Default formats","source":"message","samples":["I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 6.2ms)","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Started GET \"/api/v1/example/query\" for 123.123.123.123 at 1999-03-03 02:34:24+0000","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Processing by MyCheck::CheckController#index as JSON","I, [2018-06-27T08:01:52.991728 #1]  INFO -- : Received: {\"action\":\"cancel\",\"order\":{\"id\":1234567,\"timestamp\":153012312}}","[2019-01-16 15:38:45 +0000][my_app][WARN][dd.trace_id=7396234561907730428 dd.span_id=1152346429682372911] This is a test message!"],"type":"grok-parser"},{"is_enabled":true,"sources":["date"],"type":"date-remapper","name":"Define `date` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Stack trace","source":"error.stack","samples":["ZeroDivisionError: divided by 0\nfrom devide.rb:6:in `divide`  \nfrom devide.rb:14:in `call`\nfrom devide.rb:18:in `<main>`\n"],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"http.method","source_type":"attribute","target_type":"attribute","sources":["method"],"preserve_source":false,"type":"attribute-remapper","name":"Map `method` to `http.method`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.url_details.path","source_type":"attribute","target_type":"attribute","sources":["path"],"preserve_source":false,"type":"attribute-remapper","name":"Map `path` to `http.url_details.path`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.status_code","source_type":"attribute","target_type":"attribute","sources":["status"],"preserve_source":false,"type":"attribute-remapper","name":"Map `status` to `http.status_code`"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"},{"is_enabled":true,"name":"Convert duration unit ms to ns","expression":"duration*1000000","is_replace_missing":false,"type":"arithmetic-processor","target":"duration"}]}]
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines
    method: GET
  response:
    body: |
      [{"is_enabled":true,"name":"python","filter":{"query":"source:python"},"is_read_only":true,"type":"pipeline","id":"rTxbr2MpQsSCEtn66XmwnQ","processors":[{"is_enabled":true,"grok":{"support_rules":"_datadog_prefix (%{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}|%{date(\"yyyy-MM-dd H:mm:ss,SSS\"):timestamp}) %{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{notSpace:filename}:%{number:lineno}\\]\\s+\\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\] -\n\n_python_prefix %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{integer:process.id}\\]\n","match_rules":"traceback_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}Traceback \\(most recent call last\\):(?s)\\s*%{data:error.stack}\n\npython_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}\n\npython_fallback %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+%{data::keyvalue}((\\n|\\t)%{data:error.stack})?\n\n#Samples\n#2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log\n\n# Datadog format\n#2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext\n"},"name":"Parsing python default format","source":"message","samples":["2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log","2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext","2020-03-20 14:15:07,124 INFO [root] [app.py:78] [dd.service=excelsior dd.env=prod dd.version=abc123 dd.trace_id=9659687005038611690 dd.span_id=6632586210846541907] - This is a test of info logs","2021-07-09 8:58:31,137 WARNING [root] [views.py:42] [dd.service=datadoggo dd.env=prod dd.version=abc546 dd.trace_id=2296056412404370861 dd.span_id=16818077145337196836] - New post view.","2017-12-26T10:44:59,311 ERROR [dd.dogweb.lib.static_asset] [20081] rid=b0RV4J Error reading statics_version file.Traceback (most recent call last): File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["levelname"],"type":"status-remapper","name":"Define `levelname` as the official status of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["traceback"],"preserve_source":false,"type":"attribute-remapper","name":"Map `traceback` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `name` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["threadName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `threadName` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"parsing_traceback File \"%{notSpace:filename}\", line %{integer:lineno}.*\\s+%{regex(\"[a-zA-Z]*Error[a-zA-Z]*\"):error.kind}: %{data:error.message}\n"},"name":"Parsing python traceback","source":"error.stack","samples":["File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"my first pipeline","filter":{"query":"source:redis"},"is_read_only":false,"type":"pipeline","id":"2QGdoZWESWi6WArjxl4cxg","processors":[{"is_enabled":true,"sources":["verbose"],"type":"date-remapper","name":"Define date"},{"is_enabled":true,"name":"processor from nested pipeline","expression":"(time1-time2)*1000","is_replace_missing":false,"type":"arithmetic-processor","target":"my_arithmetic"},{"is_enabled":true,"type":"category-processor","name":"Categorise severity level","categories":[{"filter":{"query":"@severity: \"-\""},"name":"verbose"},{"filter":{"query":"@severity: \".\""},"name":"debug"}],"target":"redis.severity"},{"is_enabled":true,"grok":{"support_rules":"date_parser %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}","match_rules":"rule %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}"},"name":"Parsing Stack traces","source":"message","samples":[],"type":"grok-parser"},{"is_enabled":true,"filter":{"query":"source:kafka"},"type":"pipeline","name":"my nested pipeline","processors":[{"is_enabled":true,"name":"Define url parser","sources":["http_test"],"target":"http_test.details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Define user agent parser","sources":["http_agent"],"is_encoded":false,"type":"user-agent-parser","target":"http_agent.details"}]},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"geo ip parse","sources":["ip1"],"type":"geo-ip-parser","target":"ip.address"},{"is_enabled":false,"name":"","source":"ip1","lookup_table":["key,value"],"type":"lookup-processor","target":"ip.address"},{"is_enabled":true,"name":"lookup processor with optional fields","source":"ip2","lookup_table":["key,value"],"default_lookup":"default","type":"lookup-processor","target":"ip.address"}]},{"is_enabled":true,"name":"sample pipeline update","filter":{"query":"source:foo"},"is_read_only":false,"type":"pipeline","id":"0mc2Xh9XTOKHDRooX8oU7Q","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"Rule %{word:my_word2} %{number:my_float2}"},"name":"sample grok parser","source":"message","samples":["Rule fooo 1.2"],"type":"grok-parser"},{"is_enabled":true,"sources":["msg"],"type":"message-remapper","name":"sample message remapper"}]},{"is_enabled":true,"name":"Web Browser logs","filter":{"query":"source:browser"},"is_read_only":true,"type":"pipeline","id":"cgS5obmTSi6NgGX05lf0tg","processors":[{"is_enabled":true,"name":"Parsing the backend endpoint url","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"name":"Parsing the url of the current page","sources":["view.url"],"target":"view.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Parsing the url of the previous page","sources":["view.referrer"],"target":"view.referrer_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"","sources":["network.client.ip"],"type":"geo-ip-parser","target":"network.client.geoip"}]},{"is_enabled":true,"name":"Java","filter":{"query":"source:java"},"is_read_only":true,"type":"pipeline","id":"JW6WRX6zSYO6P27n-R85vw","processors":[{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status %{word:level}\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2000-09-07 14:07:41,508 [main] INFO  MyApp - Entering application.","54 [main] INFO MyApp.foo.bar - Entering application.","2000-09-07 14:07:44 INFO org.foo.bar:32 - Entering application.","2000-09-07 14:07:44.452 [main] INFO org.foo.bar - Entering application."],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_gc_event_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\n_parallel \\[Parallel\\sTime:\\s%{number:parallel_time}\\sms,\\sGC\\sWorkers:\\s%{number:gc_worker.count}]\n\n_gc_worker_start \\[GC\\sWorker\\sStart\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.start.min},\\sAvg:\\s%{number:gc_worker.start.avg},\\sMax:\\s%{number:gc_worker.start.max},\\sDiff:\\s%{number:gc_worker.start.diff}]\n\n_ext_root_scanning \\[Ext\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:exit_root_scanning.min},\\sAvg:\\s%{number:exit_root_scanning.avg},\\sMax:\\s%{number:exit_root_scanning.max},\\sDiff:\\s%{number:exit_root_scanning.diff},\\sSum:\\s%{number:exit_root_scanning.sum}]\n\n_update_rs \\[Update\\sRS\\s\\(ms\\):\\sMin:\\s%{number:update_rs.min},\\sAvg:\\s%{number:update_rs.avg},\\sMax:\\s%{number:update_rs.max},\\sDiff:\\s%{number:update_rs.diff},\\sSum:\\s%{number:update_rs.sum}]\n\n_gcc_event %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}:%{notSpace}\\s\\[%{regex(\"([^\\\\]]*)\"):event.type}]\n\n_processed_buffer \\[Processed\\sBuffers:\\sMin:\\s%{number:processed_buffer.min},\\sAvg:\\s%{number:processed_buffer.avg},\\sMax:\\s%{number:processed_buffer.max},\\sDiff:\\s%{number:processed_buffer.diff},\\sSum:\\s%{number:processed_buffer.sum}]\n\n_scan_rs \\[Scan\\sRS\\s\\(ms\\):\\sMin:\\s%{number:scan_rs.min},\\sAvg:\\s%{number:scan_rs.avg},\\sMax:\\s%{number:scan_rs.max},\\sDiff:\\s%{number:scan_rs.diff},\\sSum:\\s%{number:scan_rs.sum}]\n\n_code_root_scan \\[Code\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:code_root.scan.min},\\sAvg:\\s%{number:code_root.scan.avg},\\sMax:\\s%{number:code_root.scan.max},\\sDiff:\\s%{number:code_root.scan.diff},\\sSum:\\s%{number:code_root.scan.sum}]\n\n_object_copy \\[Object\\sCopy\\s\\(ms\\):\\sMin:\\s%{number:object_copy.min},\\sAvg:\\s%{number:object_copy.avg},\\sMax:\\s%{number:object_copy.max},\\sDiff:\\s%{number:object_copy.diff},\\sSum:\\s%{number:object_copy.sum}]\n\n_termination \\[Termination\\s\\(ms\\):\\sMin:\\s%{number:termination.min},\\sAvg:\\s%{number:termination.avg},\\sMax:\\s%{number:termination.max},\\sDiff:\\s%{number:termination.diff},\\sSum:\\s%{number:termination.sum}]\n\n_termination_attempts \\[Termination\\sAttempts:\\sMin:\\s%{number:termination.attempts.min},\\sAvg:\\s%{number:termination.attempts.avg},\\sMax:\\s%{number:termination.attempts.max},\\sDiff:\\s%{number:termination.attempts.diff},\\sSum:\\s%{number:termination.attempts.sum}]\n\n_gc_worker_other \\[GC\\sWorker\\sOther\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.other.min},\\sAvg:\\s%{number:gc_worker.other.avg},\\sMax:\\s%{number:gc_worker.other.max},\\sDiff:\\s%{number:gc_worker.other.diff},\\sSum:\\s%{number:gc_worker.other.sum}]\n\n_gc_worker_total \\[GC\\sWorker\\sTotal\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.total.min},\\sAvg:\\s%{number:gc_worker.total.avg},\\sMax:\\s%{number:gc_worker.total.max},\\sDiff:\\s%{number:gc_worker.total.diff},\\sSum:\\s%{number:gc_worker.total.sum}]\n\n_gc_worker_end \\[GC\\sWorker\\sEnd\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.end.min},\\sAvg:\\s%{number:gc_worker.end.avg},\\sMax:\\s%{number:gc_worker.end.max},\\sDiff:\\s%{number:gc_worker.end.diff}]\n\n_code_root_fixup \\[Code\\sRoot\\sFixup:\\s%{number:code_root.fixup}\\sms]\n\n_code_root_purge \\[Code\\sRoot\\sPurge:\\s%{number:code_root.purge}\\sms]\n\n_clear_ct \\[Clear\\sCT:\\s%{number:clear_ct}\\sms]\n\n_other \\[Other:\\s%{number:other}\\sms]\n\n_choose_cset \\[Choose\\sCSet:\\s%{number:choose_cset}\\sms]\n\n_ref_proc \\[Ref\\sProc:\\s%{number:ref.proc}\\sms]\n\n_ref_enq \\[Ref\\sEnq:\\s%{number:ref.enq}\\sms]\n\n_redirty_cards \\[Redirty\\sCards:\\s%{number:redirty_cards}\\sms]\n\n_humongous_register \\[Humongous\\sRegister:\\s%{number:humongous_register}\\sms]\n\n_humongous_reclaim \\[Humongous\\sReclaim:\\s%{number:humongous_reclaim}\\sms]\n\n_free \\[Free\\sCSet:\\s%{number:free}\\sms]\n\n_memory_usage \\[Eden: (%{number:eden.memory_before}M|%{number:eden.memory_before:scale(1000)}G)\\((%{number:eden.memory_allocated_before}M|%{number:eden.memory_allocated_before:scale(1000)}G)\\)->%{number:eden.memory_after}B\\((%{number:eden.memory_allocated_after}M|%{number:eden.memory_allocated_after:scale(1000)}G)\\)\\sSurvivors:\\s%{number:survivor.memory_before}M->%{number:survivor.memory_after}M\\sHeap:\\s(%{number:heap.memory_before}M|%{number:heap.memory_before:scale(1000)}G)\\((%{number:heap.memory_allocated_before}M|%{number:heap.memory_allocated_before:scale(1000)}G)\\)->%{number:heap.memory_after}M\\((%{number:heap.memory_allocated_after}M|%{number:heap.memory_allocated_after:scale(1000)}G)\\)]\n\n_times \\[Times:\\suser=%{number:times.user}\\ssys=%{number:times.system},\\sreal=%{number:times.real}\\ssecs]\n","match_rules":"gc_nonverbose_basic \\[%{notSpace}\\]\\[%{word:level}\\s*\\]\\[%{word:gc.type}\\] GC\\(%{number:gc.iteration}\\) %{data:gc.action} \\(%{data:gc.phase}\\) %{number:heap.memory_before}M\\-\\>%{number:heap.memory_after}M\\(%{number:heap.memory_total}M\\) %{number:duration:scale(1000000)}ms\n\ngc_action_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\nnon_gc_action_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[%{regex(\"([^,]*)\"):gc.action}(,\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\ngc_verbose %{_gc_event_phase_duration}(\\r|\\n|\\s)*%{_parallel}(\\r|\\n|\\s)*%{_gc_worker_start}(\\r|\\n|\\s)*%{_ext_root_scanning}(\\r|\\n|\\s)*%{_update_rs}(\\r|\\n|\\s)*%{_processed_buffer}(\\r|\\n|\\s)*%{_scan_rs}(\\r|\\n|\\s)*%{_code_root_scan}(\\r|\\n|\\s)*%{_object_copy}(\\r|\\n|\\s)*%{_termination}(\\r|\\n|\\s)*%{_termination_attempts}(\\r|\\n|\\s)*%{_gc_worker_other}(\\r|\\n|\\s)*%{_gc_worker_total}(\\r|\\n|\\s)*%{_gc_worker_end}(\\r|\\n|\\s)*%{_code_root_fixup}(\\r|\\n|\\s)*%{_code_root_purge}(\\r|\\n|\\s)*%{_clear_ct}(\\r|\\n|\\s)*%{_other}(\\r|\\n|\\s)*%{_choose_cset}(\\r|\\n|\\s)*%{_ref_proc}(\\r|\\n|\\s)*%{_ref_enq}(\\r|\\n|\\s)*%{_redirty_cards}(\\r|\\n|\\s)*%{_humongous_register}(\\r|\\n|\\s)*%{_humongous_reclaim}(\\r|\\n|\\s)*%{_free}(\\r|\\n|\\s)*%{_memory_usage}(\\r|\\n|\\s)*%{_times}\n\n#Parse Java 11 GC logs formats\ngc_new_format \\[%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}\\]\\[%{notSpace:status}\\]\\[%{notSpace:gc.type}(\\s)?\\]\\sGC\\(%{number:gc.iteration}\\)\\s%{data:gc.action}(\\s%{number:duration:scale(1000000)}ms)?\n"},"name":"Parsing GC logs","source":"message","samples":["[9237.485s][info   ][gc] GC(835) Pause Young (G1 Evacuation Pause) 4937M->645M(7168M) 17.476ms","2019-03-20T14:36:30.111+0000: 41.098: [GC concurrent-mark-end, 0.0272767 secs]","2019-03-20T14:36:30.111+0000: 41.071: [GC concurrent-mark-start]","2019-03-20T14:36:30.111+0000: 41.099: [Finalize Marking, 0.0011661 secs]"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `stack_trace` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger_name","loggerName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger_name`, `loggerName` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread_name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread_name` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Java Stack traces","source":"error.stack","samples":["java.lang.NullPointerException: this is my error message\n at com.hello.world.flow.Checker.checkCacheEntryyy(Checker.java: 154)\n"],"type":"grok-parser"},{"is_enabled":true,"name":"Calculate GC memory freed","expression":"(heap.memory_before - heap.memory_after)","is_replace_missing":false,"type":"arithmetic-processor","target":"gc.memory_freed"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env","contextMap.dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env`, `contextMap.dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version","contextMap.dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version`, `contextMap.dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service","contextMap.dd.service"],"type":"service-remapper","name":"Define `dd.service`, `contextMap.dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"Datadog Agent","filter":{"query":"source:(agent OR datadog-agent OR datadog-agent-cluster-worker OR datadog-cluster-agent OR process-agent OR security-agent OR system-probe OR trace-agent OR cluster-agent)"},"is_read_only":true,"type":"pipeline","id":"4I6FNy5GToqi2fKVAqNZJw","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"agent_rule         %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\) \\|( %{data::keyvalue(\":\")} \\|)?( - \\|)?( \\(%{notSpace:pyFilename}:%{number:pyLineno}\\) \\|)?%{data}\nagent_rule_pre_611 %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\)%{data}\njmxfetch_rule      %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level}\\s+\\| %{word:class} \\| %{data}\n"},"name":"Parsing Datadog Agent logs","source":"message","samples":["2020-07-01 09:48:14 UTC | CORE | INFO | (pkg/collector/runner/runner.go:327 in work) | check:network,type:core | Done running check","2020-09-15 10:00:07 UTC | CORE | INFO | (pkg/collector/python/datadog_agent.go:120 in LogMessage) | kafka_cluster_status:8ca7b736f0aa43e5 | (kafka_cluster_status.py:213) | Checking for out of sync partition replicas","2019-04-08 13:53:48 UTC | TRACE | INFO | (pkg/trace/agent/agent.go:145 in loop) | exiting","2019-02-01 16:59:41 UTC | INFO | (connection_manager.go:124 in CloseConnection) | Connection closed","2020-11-18 10:31:13 UTC | JMX | INFO  | App | Successfully initialized instance: cassandra-localhost-7199"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"}]},{"is_enabled":true,"name":"test-oneof","filter":{"query":"kube_deployment:synthetics-* OR service:synthetics* OR service:ingress-haproxy-synthetics"},"is_read_only":false,"type":"pipeline","id":"zpVyok_OSzWrvV38NS-YAA","processors":[{"is_enabled":true,"filter":{"query":"source:go OR log_format:dd-go-std"},"type":"pipeline","name":"oneof go","processors":[]},{"is_enabled":true,"override_on_conflict":false,"target":"synthetics_test_url.host","source_type":"attribute","target_type":"attribute","sources":["host"],"preserve_source":true,"type":"attribute-remapper","name":"oneof processor"}]},{"is_enabled":true,"name":"Sinatra","filter":{"query":"source:sinatra"},"is_read_only":true,"type":"pipeline","id":"vL--Mbs7SceY84ADEYu40w","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access (%{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}|%{date(\"dd/MMM/yyyy HH:mm:ss\"):date_access})\n_duration %{number:duration:scale(1000000000)}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)( %{_duration}|-)?\n"},"name":"Parsing Sinatra logs","source":"message","samples":["127.0.0.1 - - [15/Jul/2018:17:41:40 +0000] \"GET /uptime_status HTTP/1.1\" 200 34 0.0004","127.0.0.1 - - [15/Jul/2018 23:40:31] \"GET /uptime_status HTTP/1.1\" 200 6997 1.8096"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category"],"type":"status-remapper","name":"Define `http.status_category` as the official status of the log"}]},{"is_enabled":true,"name":"Nginx","filter":{"query":"source:nginx"},"is_read_only":true,"type":"pipeline","id":"RSbXaJxLS8WSZbAV6vJnYg","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_user_agent %{regex(\"[^\\\\\\\"]*\"):http.useragent}\n_referer %{notSpace:http.referer}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access %{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}\n_x_forwarded_for %{regex(\"[^\\\\\\\"]*\"):http._x_forwarded_for:nullIf(\"-\")}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)\n\naccess.combined %{access.common} (%{number:duration:scale(1000000000)} )?\"%{_referer}\" \"%{_user_agent}\"( \"%{_x_forwarded_for}\")?.*\n\nerror.format %{date(\"yyyy/MM/dd HH:mm:ss\"):date_access} \\[%{word:level}\\] %{data:error.message}(, %{data::keyvalue(\": \",\",\")})?\n"},"name":"Parsing Nginx logs","source":"message","samples":["127.0.0.1 - frank [13/Jul/2016:10:55:36 +0000] \"GET /apache_pb.gif HTTP/1.0\" 200 2326","172.17.0.1 - - [06/Jan/2017:16:16:37 +0000] \"GET /datadoghq/company?test=var1%20Pl HTTP/1.1\" 200 612 \"http://www.perdu.com/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36\" \"-\"","2017/09/26 14:36:50 [error] 8409#8409: *317058 \"/usr/share/nginx/html/sql/sql-admin/index.html\" is not found (2: No such file or directory), client: 217.92.148.44, server: localhost, request: \"HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1\", host: \"174.138.82.103\""],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"network.client.ip","source_type":"attribute","target_type":"attribute","sources":["client"],"preserve_source":false,"type":"attribute-remapper","name":"Map `client` to `network.client.ip`"},{"is_enabled":true,"grok":{"support_rules":"_method %{word:http.method}\n_url %{notSpace:http.url}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n","match_rules":"request_parsing (?>%{_method} |)%{_url}(?> %{_version}|)\n"},"name":"Parsing Nginx Error log requests","source":"request","samples":["HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category","level"],"type":"status-remapper","name":"Define `http.status_category`, `level` as the official status of the log"}]},{"is_enabled":false,"name":"Jenkins","filter":{"query":"source:jenkins service:jenkins"},"is_read_only":false,"type":"pipeline","id":"LWIrk9TLT3Kp9hnIbWBs2w","processors":[{"is_enabled":true,"filter":{"query":"@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Main Logs","processors":[{"is_enabled":false,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss.SSS+0000\"):date}\n_id \\[id\\=%{integer:id}\\]\n_level %{word:level}\n_logger (\\w+|\\.)+?%{regex(\"([a-zA-Z0-9]+[.][a-zA-Z0-9]+)\"):logger.name}\\#%{data:logger.label}\n_message %{data:message}\n","match_rules":"rule %{_date}\\s+%{_id}\\s+%{_level}\\s+%{_logger}\\:\\s+%{_message}"},"name":"parse the log message","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status (%{word:level}|\\[%{word:level}\\s*\\])\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+(\\(%{_logger_name}:%{_line}\\)|%{_logger_name})\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_custom_jenkins (%{_date}|%{_date_ms}|%{_date_slf4j})(\\+0000)?\\s+\\[(id=)?%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}:\\s+?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"}]},{"is_enabled":true,"filter":{"query":"-@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Job Logs","processors":[{"is_enabled":true,"grok":{"support_rules":"_job %{data:jenkins.job}\n_build %{data:jenkins.build}\n","match_rules":"pipeline_job_rule /var/lib/jenkins/jobs/pipeline/jobs/%{data:jenkins.pipeline}/jobs/%{_job}/builds/%{_build}/log\nnon_pipeline_job_rule /var/lib/jenkins/jobs/%{_job}/builds/%{_build}/log\n"},"name":"parse tailed_path","source":"tailed_path","samples":["/var/lib/jenkins/jobs/pipeline/jobs/admin/jobs/venmo-platform-pr-controller/builds/52228/log","/var/lib/jenkins/jobs/pipeline/jobs/default/jobs/venmo-platform-pr-foundation-swagger-missing-descriptions/builds/5210/log","/var/lib/jenkins/jobs/update_datadog_metrics/builds/49760/log"],"type":"grok-parser"}]}]},{"is_enabled":true,"name":"Ruby","filter":{"query":"source:ruby"},"is_read_only":true,"type":"pipeline","id":"TL1aouiMTNmpCCN1iZxoSA","processors":[{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread` to `logger.thread_name`"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["exception","stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `exception`, `stack_trace` to `error.stack`"},{"is_enabled":true,"grok":{"support_rules":"_date (?:%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSSSS\"):date}|%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSS\"):date})\n_status %{word:level}\n_thread_id %{word:logger.thread_id}\n_thread_name %{notSpace:logger.thread_name}\n_logger_name %{notSpace:logger.name}\n_ruby_log_prefix %{word}, \\[%{_date} #%{_thread_id}\\]\\s+%{_status}\\s+--\\s+(?:%{_logger_name})?:(?:\\s+%{_trace_rule})?\n_trace_rule \\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\]\n_datadog_prefix \\[%{date(\"yyyy-MM-dd HH:mm:ss Z\"):date}\\]\\[%{word:application}\\]\\[%{_status}\\]%{_trace_rule}\n_activate_status %{word:active_directory.process_status}\n","match_rules":"# Active Directory Rails logs\n\ncompleted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{integer:http.status_code}(?: (?:%{word}|Internal Server Error))? in %{number:duration}ms \\((?>Views: %{number:views}ms \\| )?ActiveRecord: %{number:activerecord}ms\\)\n\nprocessing_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} by %{notSpace:processor}.*\n\nstarted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{word:http.method} \"%{notSpace:http.url_details.path}\" for %{ipOrHost:network.client.ip}.*\n\ndatadog_format %{_datadog_prefix} %{data::keyvalue(\"=\",\"/\")}(?>(\\n|\\t)%{data:error.stack})?\n\nreceived_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?Received: %{data::json}\n\n## Default Ruby formats\nRuby_default %{_ruby_log_prefix}\\s+%{data:error.message}(?>(\\n|\\t)%{data:error.stack})?\n\nRuby_keyvalue %{data::keyvalue(\"=\",\"/\")}\n\n# Extra samples:\n#I, [1999-03-03T02:34:24.895701 #19074]  INFO -- Main: Some error.\n## Datadog Format\n#[dd.trace_id=1321281354128614668 dd.span_id=5986620922286636160] Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.0ms)\n"},"name":"Parsing Ruby Default formats","source":"message","samples":["I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 6.2ms)","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Started GET \"/api/v1/example/query\" for 123.123.123.123 at 1999-03-03 02:34:24+0000","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Processing by MyCheck::CheckController#index as JSON","I, [2018-06-27T08:01:52.991728 #1]  INFO -- : Received: {\"action\":\"cancel\",\"order\":{\"id\":1234567,\"timestamp\":153012312}}","[2019-01-16 15:38:45 +0000][my_app][WARN][dd.trace_id=7396234561907730428 dd.span_id=1152346429682372911] This is a test message!"],"type":"grok-parser"},{"is_enabled":true,"sources":["date"],"type":"date-remapper","name":"Define `date` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Stack trace","source":"error.stack","samples":["ZeroDivisionError: divided by 0\nfrom devide.rb:6:in `divide`  \nfrom devide.rb:14:in `call`\nfrom devide.rb:18:in `<main>`\n"],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"http.method","source_type":"attribute","target_type":"attribute","sources":["method"],"preserve_source":false,"type":"attribute-remapper","name":"Map `method` to `http.method`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.url_details.path","source_type":"attribute","target_type":"attribute","sources":["path"],"preserve_source":false,"type":"attribute-remapper","name":"Map `path` to `http.url_details.path`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.status_code","source_type":"attribute","target_type":"attribute","sources":["status"],"preserve_source":false,"type":"attribute-remapper","name":"Map `status` to `http.status_code`"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"},{"is_enabled":true,"name":"Convert duration unit ms to ns","expression":"duration*1000000","is_replace_missing":false,"type":"arithmetic-processor","target":"duration"}]}]
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines
    method: GET
  response:
    body: |
      [{"is_enabled":true,"name":"python","filter":{"query":"source:python"},"is_read_only":true,"type":"pipeline","id":"rTxbr2MpQsSCEtn66XmwnQ","processors":[{"is_enabled":true,"grok":{"support_rules":"_datadog_prefix (%{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}|%{date(\"yyyy-MM-dd H:mm:ss,SSS\"):timestamp}) %{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{notSpace:filename}:%{number:lineno}\\]\\s+\\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\] -\n\n_python_prefix %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{integer:process.id}\\]\n","match_rules":"traceback_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}Traceback \\(most recent call last\\):(?s)\\s*%{data:error.stack}\n\npython_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}\n\npython_fallback %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+%{data::keyvalue}((\\n|\\t)%{data:error.stack})?\n\n#Samples\n#2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log\n\n# Datadog format\n#2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext\n"},"name":"Parsing python default format","source":"message","samples":["2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log","2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext","2020-03-20 14:15:07,124 INFO [root] [app.py:78] [dd.service=excelsior dd.env=prod dd.version=abc123 dd.trace_id=9659687005038611690 dd.span_id=6632586210846541907] - This is a test of info logs","2021-07-09 8:58:31,137 WARNING [root] [views.py:42] [dd.service=datadoggo dd.env=prod dd.version=abc546 dd.trace_id=2296056412404370861 dd.span_id=16818077145337196836] - New post view.","2017-12-26T10:44:59,311 ERROR [dd.dogweb.lib.static_asset] [20081] rid=b0RV4J Error reading statics_version file.Traceback (most recent call last): File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["levelname"],"type":"status-remapper","name":"Define `levelname` as the official status of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["traceback"],"preserve_source":false,"type":"attribute-remapper","name":"Map `traceback` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `name` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["threadName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `threadName` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"parsing_traceback File \"%{notSpace:filename}\", line %{integer:lineno}.*\\s+%{regex(\"[a-zA-Z]*Error[a-zA-Z]*\"):error.kind}: %{data:error.message}\n"},"name":"Parsing python traceback","source":"error.stack","samples":["File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"my first pipeline","filter":{"query":"source:redis"},"is_read_only":false,"type":"pipeline","id":"2QGdoZWESWi6WArjxl4cxg","processors":[{"is_enabled":true,"sources":["verbose"],"type":"date-remapper","name":"Define date"},{"is_enabled":true,"name":"processor from nested pipeline","expression":"(time1-time2)*1000","is_replace_missing":false,"type":"arithmetic-processor","target":"my_arithmetic"},{"is_enabled":true,"type":"category-processor","name":"Categorise severity level","categories":[{"filter":{"query":"@severity: \"-\""},"name":"verbose"},{"filter":{"query":"@severity: \".\""},"name":"debug"}],"target":"redis.severity"},{"is_enabled":true,"grok":{"support_rules":"date_parser %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}","match_rules":"rule %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}"},"name":"Parsing Stack traces","source":"message","samples":[],"type":"grok-parser"},{"is_enabled":true,"filter":{"query":"source:kafka"},"type":"pipeline","name":"my nested pipeline","processors":[{"is_enabled":true,"name":"Define url parser","sources":["http_test"],"target":"http_test.details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Define user agent parser","sources":["http_agent"],"is_encoded":false,"type":"user-agent-parser","target":"http_agent.details"}]},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"geo ip parse","sources":["ip1"],"type":"geo-ip-parser","target":"ip.address"},{"is_enabled":false,"name":"","source":"ip1","lookup_table":["key,value"],"type":"lookup-processor","target":"ip.address"},{"is_enabled":true,"name":"lookup processor with optional fields","source":"ip2","lookup_table":["key,value"],"default_lookup":"default","type":"lookup-processor","target":"ip.address"}]},{"is_enabled":true,"name":"sample pipeline update","filter":{"query":"source:foo"},"is_read_only":false,"type":"pipeline","id":"0mc2Xh9XTOKHDRooX8oU7Q","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"Rule %{word:my_word2} %{number:my_float2}"},"name":"sample grok parser","source":"message","samples":["Rule fooo 1.2"],"type":"grok-parser"},{"is_enabled":true,"sources":["msg"],"type":"message-remapper","name":"sample message remapper"}]},{"is_enabled":true,"name":"Web Browser logs","filter":{"query":"source:browser"},"is_read_only":true,"type":"pipeline","id":"cgS5obmTSi6NgGX05lf0tg","processors":[{"is_enabled":true,"name":"Parsing the backend endpoint url","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"name":"Parsing the url of the current page","sources":["view.url"],"target":"view.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Parsing the url of the previous page","sources":["view.referrer"],"target":"view.referrer_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"","sources":["network.client.ip"],"type":"geo-ip-parser","target":"network.client.geoip"}]},{"is_enabled":true,"name":"Java","filter":{"query":"source:java"},"is_read_only":true,"type":"pipeline","id":"JW6WRX6zSYO6P27n-R85vw","processors":[{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status %{word:level}\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2000-09-07 14:07:41,508 [main] INFO  MyApp - Entering application.","54 [main] INFO MyApp.foo.bar - Entering application.","2000-09-07 14:07:44 INFO org.foo.bar:32 - Entering application.","2000-09-07 14:07:44.452 [main] INFO org.foo.bar - Entering application."],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_gc_event_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\n_parallel \\[Parallel\\sTime:\\s%{number:parallel_time}\\sms,\\sGC\\sWorkers:\\s%{number:gc_worker.count}]\n\n_gc_worker_start \\[GC\\sWorker\\sStart\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.start.min},\\sAvg:\\s%{number:gc_worker.start.avg},\\sMax:\\s%{number:gc_worker.start.max},\\sDiff:\\s%{number:gc_worker.start.diff}]\n\n_ext_root_scanning \\[Ext\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:exit_root_scanning.min},\\sAvg:\\s%{number:exit_root_scanning.avg},\\sMax:\\s%{number:exit_root_scanning.max},\\sDiff:\\s%{number:exit_root_scanning.diff},\\sSum:\\s%{number:exit_root_scanning.sum}]\n\n_update_rs \\[Update\\sRS\\s\\(ms\\):\\sMin:\\s%{number:update_rs.min},\\sAvg:\\s%{number:update_rs.avg},\\sMax:\\s%{number:update_rs.max},\\sDiff:\\s%{number:update_rs.diff},\\sSum:\\s%{number:update_rs.sum}]\n\n_gcc_event %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}:%{notSpace}\\s\\[%{regex(\"([^\\\\]]*)\"):event.type}]\n\n_processed_buffer \\[Processed\\sBuffers:\\sMin:\\s%{number:processed_buffer.min},\\sAvg:\\s%{number:processed_buffer.avg},\\sMax:\\s%{number:processed_buffer.max},\\sDiff:\\s%{number:processed_buffer.diff},\\sSum:\\s%{number:processed_buffer.sum}]\n\n_scan_rs \\[Scan\\sRS\\s\\(ms\\):\\sMin:\\s%{number:scan_rs.min},\\sAvg:\\s%{number:scan_rs.avg},\\sMax:\\s%{number:scan_rs.max},\\sDiff:\\s%{number:scan_rs.diff},\\sSum:\\s%{number:scan_rs.sum}]\n\n_code_root_scan \\[Code\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:code_root.scan.min},\\sAvg:\\s%{number:code_root.scan.avg},\\sMax:\\s%{number:code_root.scan.max},\\sDiff:\\s%{number:code_root.scan.diff},\\sSum:\\s%{number:code_root.scan.sum}]\n\n_object_copy \\[Object\\sCopy\\s\\(ms\\):\\sMin:\\s%{number:object_copy.min},\\sAvg:\\s%{number:object_copy.avg},\\sMax:\\s%{number:object_copy.max},\\sDiff:\\s%{number:object_copy.diff},\\sSum:\\s%{number:object_copy.sum}]\n\n_termination \\[Termination\\s\\(ms\\):\\sMin:\\s%{number:termination.min},\\sAvg:\\s%{number:termination.avg},\\sMax:\\s%{number:termination.max},\\sDiff:\\s%{number:termination.diff},\\sSum:\\s%{number:termination.sum}]\n\n_termination_attempts \\[Termination\\sAttempts:\\sMin:\\s%{number:termination.attempts.min},\\sAvg:\\s%{number:termination.attempts.avg},\\sMax:\\s%{number:termination.attempts.max},\\sDiff:\\s%{number:termination.attempts.diff},\\sSum:\\s%{number:termination.attempts.sum}]\n\n_gc_worker_other \\[GC\\sWorker\\sOther\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.other.min},\\sAvg:\\s%{number:gc_worker.other.avg},\\sMax:\\s%{number:gc_worker.other.max},\\sDiff:\\s%{number:gc_worker.other.diff},\\sSum:\\s%{number:gc_worker.other.sum}]\n\n_gc_worker_total \\[GC\\sWorker\\sTotal\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.total.min},\\sAvg:\\s%{number:gc_worker.total.avg},\\sMax:\\s%{number:gc_worker.total.max},\\sDiff:\\s%{number:gc_worker.total.diff},\\sSum:\\s%{number:gc_worker.total.sum}]\n\n_gc_worker_end \\[GC\\sWorker\\sEnd\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.end.min},\\sAvg:\\s%{number:gc_worker.end.avg},\\sMax:\\s%{number:gc_worker.end.max},\\sDiff:\\s%{number:gc_worker.end.diff}]\n\n_code_root_fixup \\[Code\\sRoot\\sFixup:\\s%{number:code_root.fixup}\\sms]\n\n_code_root_purge \\[Code\\sRoot\\sPurge:\\s%{number:code_root.purge}\\sms]\n\n_clear_ct \\[Clear\\sCT:\\s%{number:clear_ct}\\sms]\n\n_other \\[Other:\\s%{number:other}\\sms]\n\n_choose_cset \\[Choose\\sCSet:\\s%{number:choose_cset}\\sms]\n\n_ref_proc \\[Ref\\sProc:\\s%{number:ref.proc}\\sms]\n\n_ref_enq \\[Ref\\sEnq:\\s%{number:ref.enq}\\sms]\n\n_redirty_cards \\[Redirty\\sCards:\\s%{number:redirty_cards}\\sms]\n\n_humongous_register \\[Humongous\\sRegister:\\s%{number:humongous_register}\\sms]\n\n_humongous_reclaim \\[Humongous\\sReclaim:\\s%{number:humongous_reclaim}\\sms]\n\n_free \\[Free\\sCSet:\\s%{number:free}\\sms]\n\n_memory_usage \\[Eden: (%{number:eden.memory_before}M|%{number:eden.memory_before:scale(1000)}G)\\((%{number:eden.memory_allocated_before}M|%{number:eden.memory_allocated_before:scale(1000)}G)\\)->%{number:eden.memory_after}B\\((%{number:eden.memory_allocated_after}M|%{number:eden.memory_allocated_after:scale(1000)}G)\\)\\sSurvivors:\\s%{number:survivor.memory_before}M->%{number:survivor.memory_after}M\\sHeap:\\s(%{number:heap.memory_before}M|%{number:heap.memory_before:scale(1000)}G)\\((%{number:heap.memory_allocated_before}M|%{number:heap.memory_allocated_before:scale(1000)}G)\\)->%{number:heap.memory_after}M\\((%{number:heap.memory_allocated_after}M|%{number:heap.memory_allocated_after:scale(1000)}G)\\)]\n\n_times \\[Times:\\suser=%{number:times.user}\\ssys=%{number:times.system},\\sreal=%{number:times.real}\\ssecs]\n","match_rules":"gc_nonverbose_basic \\[%{notSpace}\\]\\[%{word:level}\\s*\\]\\[%{word:gc.type}\\] GC\\(%{number:gc.iteration}\\) %{data:gc.action} \\(%{data:gc.phase}\\) %{number:heap.memory_before}M\\-\\>%{number:heap.memory_after}M\\(%{number:heap.memory_total}M\\) %{number:duration:scale(1000000)}ms\n\ngc_action_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\nnon_gc_action_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[%{regex(\"([^,]*)\"):gc.action}(,\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\ngc_verbose %{_gc_event_phase_duration}(\\r|\\n|\\s)*%{_parallel}(\\r|\\n|\\s)*%{_gc_worker_start}(\\r|\\n|\\s)*%{_ext_root_scanning}(\\r|\\n|\\s)*%{_update_rs}(\\r|\\n|\\s)*%{_processed_buffer}(\\r|\\n|\\s)*%{_scan_rs}(\\r|\\n|\\s)*%{_code_root_scan}(\\r|\\n|\\s)*%{_object_copy}(\\r|\\n|\\s)*%{_termination}(\\r|\\n|\\s)*%{_termination_attempts}(\\r|\\n|\\s)*%{_gc_worker_other}(\\r|\\n|\\s)*%{_gc_worker_total}(\\r|\\n|\\s)*%{_gc_worker_end}(\\r|\\n|\\s)*%{_code_root_fixup}(\\r|\\n|\\s)*%{_code_root_purge}(\\r|\\n|\\s)*%{_clear_ct}(\\r|\\n|\\s)*%{_other}(\\r|\\n|\\s)*%{_choose_cset}(\\r|\\n|\\s)*%{_ref_proc}(\\r|\\n|\\s)*%{_ref_enq}(\\r|\\n|\\s)*%{_redirty_cards}(\\r|\\n|\\s)*%{_humongous_register}(\\r|\\n|\\s)*%{_humongous_reclaim}(\\r|\\n|\\s)*%{_free}(\\r|\\n|\\s)*%{_memory_usage}(\\r|\\n|\\s)*%{_times}\n\n#Parse Java 11 GC logs formats\ngc_new_format \\[%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}\\]\\[%{notSpace:status}\\]\\[%{notSpace:gc.type}(\\s)?\\]\\sGC\\(%{number:gc.iteration}\\)\\s%{data:gc.action}(\\s%{number:duration:scale(1000000)}ms)?\n"},"name":"Parsing GC logs","source":"message","samples":["[9237.485s][info   ][gc] GC(835) Pause Young (G1 Evacuation Pause) 4937M->645M(7168M) 17.476ms","2019-03-20T14:36:30.111+0000: 41.098: [GC concurrent-mark-end, 0.0272767 secs]","2019-03-20T14:36:30.111+0000: 41.071: [GC concurrent-mark-start]","2019-03-20T14:36:30.111+0000: 41.099: [Finalize Marking, 0.0011661 secs]"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `stack_trace` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger_name","loggerName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger_name`, `loggerName` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread_name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread_name` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Java Stack traces","source":"error.stack","samples":["java.lang.NullPointerException: this is my error message\n at com.hello.world.flow.Checker.checkCacheEntryyy(Checker.java: 154)\n"],"type":"grok-parser"},{"is_enabled":true,"name":"Calculate GC memory freed","expression":"(heap.memory_before - heap.memory_after)","is_replace_missing":false,"type":"arithmetic-processor","target":"gc.memory_freed"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env","contextMap.dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env`, `contextMap.dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version","contextMap.dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version`, `contextMap.dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service","contextMap.dd.service"],"type":"service-remapper","name":"Define `dd.service`, `contextMap.dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"Datadog Agent","filter":{"query":"source:(agent OR datadog-agent OR datadog-agent-cluster-worker OR datadog-cluster-agent OR process-agent OR security-agent OR system-probe OR trace-agent OR cluster-agent)"},"is_read_only":true,"type":"pipeline","id":"4I6FNy5GToqi2fKVAqNZJw","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"agent_rule         %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\) \\|( %{data::keyvalue(\":\")} \\|)?( - \\|)?( \\(%{notSpace:pyFilename}:%{number:pyLineno}\\) \\|)?%{data}\nagent_rule_pre_611 %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\)%{data}\njmxfetch_rule      %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level}\\s+\\| %{word:class} \\| %{data}\n"},"name":"Parsing Datadog Agent logs","source":"message","samples":["2020-07-01 09:48:14 UTC | CORE | INFO | (pkg/collector/runner/runner.go:327 in work) | check:network,type:core | Done running check","2020-09-15 10:00:07 UTC | CORE | INFO | (pkg/collector/python/datadog_agent.go:120 in LogMessage) | kafka_cluster_status:8ca7b736f0aa43e5 | (kafka_cluster_status.py:213) | Checking for out of sync partition replicas","2019-04-08 13:53:48 UTC | TRACE | INFO | (pkg/trace/agent/agent.go:145 in loop) | exiting","2019-02-01 16:59:41 UTC | INFO | (connection_manager.go:124 in CloseConnection) | Connection closed","2020-11-18 10:31:13 UTC | JMX | INFO  | App | Successfully initialized instance: cassandra-localhost-7199"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"}]},{"is_enabled":true,"name":"test-oneof","filter":{"query":"kube_deployment:synthetics-* OR service:synthetics* OR service:ingress-haproxy-synthetics"},"is_read_only":false,"type":"pipeline","id":"zpVyok_OSzWrvV38NS-YAA","processors":[{"is_enabled":true,"filter":{"query":"source:go OR log_format:dd-go-std"},"type":"pipeline","name":"oneof go","processors":[]},{"is_enabled":true,"override_on_conflict":false,"target":"synthetics_test_url.host","source_type":"attribute","target_type":"attribute","sources":["host"],"preserve_source":true,"type":"attribute-remapper","name":"oneof processor"}]},{"is_enabled":true,"name":"Sinatra","filter":{"query":"source:sinatra"},"is_read_only":true,"type":"pipeline","id":"vL--Mbs7SceY84ADEYu40w","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access (%{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}|%{date(\"dd/MMM/yyyy HH:mm:ss\"):date_access})\n_duration %{number:duration:scale(1000000000)}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)( %{_duration}|-)?\n"},"name":"Parsing Sinatra logs","source":"message","samples":["127.0.0.1 - - [15/Jul/2018:17:41:40 +0000] \"GET /uptime_status HTTP/1.1\" 200 34 0.0004","127.0.0.1 - - [15/Jul/2018 23:40:31] \"GET /uptime_status HTTP/1.1\" 200 6997 1.8096"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category"],"type":"status-remapper","name":"Define `http.status_category` as the official status of the log"}]},{"is_enabled":true,"name":"Nginx","filter":{"query":"source:nginx"},"is_read_only":true,"type":"pipeline","id":"RSbXaJxLS8WSZbAV6vJnYg","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_user_agent %{regex(\"[^\\\\\\\"]*\"):http.useragent}\n_referer %{notSpace:http.referer}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access %{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}\n_x_forwarded_for %{regex(\"[^\\\\\\\"]*\"):http._x_forwarded_for:nullIf(\"-\")}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)\n\naccess.combined %{access.common} (%{number:duration:scale(1000000000)} )?\"%{_referer}\" \"%{_user_agent}\"( \"%{_x_forwarded_for}\")?.*\n\nerror.format %{date(\"yyyy/MM/dd HH:mm:ss\"):date_access} \\[%{word:level}\\] %{data:error.message}(, %{data::keyvalue(\": \",\",\")})?\n"},"name":"Parsing Nginx logs","source":"message","samples":["127.0.0.1 - frank [13/Jul/2016:10:55:36 +0000] \"GET /apache_pb.gif HTTP/1.0\" 200 2326","172.17.0.1 - - [06/Jan/2017:16:16:37 +0000] \"GET /datadoghq/company?test=var1%20Pl HTTP/1.1\" 200 612 \"http://www.perdu.com/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36\" \"-\"","2017/09/26 14:36:50 [error] 8409#8409: *317058 \"/usr/share/nginx/html/sql/sql-admin/index.html\" is not found (2: No such file or directory), client: 217.92.148.44, server: localhost, request: \"HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1\", host: \"174.138.82.103\""],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"network.client.ip","source_type":"attribute","target_type":"attribute","sources":["client"],"preserve_source":false,"type":"attribute-remapper","name":"Map `client` to `network.client.ip`"},{"is_enabled":true,"grok":{"support_rules":"_method %{word:http.method}\n_url %{notSpace:http.url}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n","match_rules":"request_parsing (?>%{_method} |)%{_url}(?> %{_version}|)\n"},"name":"Parsing Nginx Error log requests","source":"request","samples":["HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category","level"],"type":"status-remapper","name":"Define `http.status_category`, `level` as the official status of the log"}]},{"is_enabled":false,"name":"Jenkins","filter":{"query":"source:jenkins service:jenkins"},"is_read_only":false,"type":"pipeline","id":"LWIrk9TLT3Kp9hnIbWBs2w","processors":[{"is_enabled":true,"filter":{"query":"@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Main Logs","processors":[{"is_enabled":false,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss.SSS+0000\"):date}\n_id \\[id\\=%{integer:id}\\]\n_level %{word:level}\n_logger (\\w+|\\.)+?%{regex(\"([a-zA-Z0-9]+[.][a-zA-Z0-9]+)\"):logger.name}\\#%{data:logger.label}\n_message %{data:message}\n","match_rules":"rule %{_date}\\s+%{_id}\\s+%{_level}\\s+%{_logger}\\:\\s+%{_message}"},"name":"parse the log message","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status (%{word:level}|\\[%{word:level}\\s*\\])\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+(\\(%{_logger_name}:%{_line}\\)|%{_logger_name})\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_custom_jenkins (%{_date}|%{_date_ms}|%{_date_slf4j})(\\+0000)?\\s+\\[(id=)?%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}:\\s+?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"}]},{"is_enabled":true,"filter":{"query":"-@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Job Logs","processors":[{"is_enabled":true,"grok":{"support_rules":"_job %{data:jenkins.job}\n_build %{data:jenkins.build}\n","match_rules":"pipeline_job_rule /var/lib/jenkins/jobs/pipeline/jobs/%{data:jenkins.pipeline}/jobs/%{_job}/builds/%{_build}/log\nnon_pipeline_job_rule /var/lib/jenkins/jobs/%{_job}/builds/%{_build}/log\n"},"name":"parse tailed_path","source":"tailed_path","samples":["/var/lib/jenkins/jobs/pipeline/jobs/admin/jobs/venmo-platform-pr-controller/builds/52228/log","/var/lib/jenkins/jobs/pipeline/jobs/default/jobs/venmo-platform-pr-foundation-swagger-missing-descriptions/builds/5210/log","/var/lib/jenkins/jobs/update_datadog_metrics/builds/49760/log"],"type":"grok-parser"}]}]},{"is_enabled":true,"name":"Ruby","filter":{"query":"source:ruby"},"is_read_only":true,"type":"pipeline","id":"TL1aouiMTNmpCCN1iZxoSA","processors":[{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread` to `logger.thread_name`"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["exception","stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `exception`, `stack_trace` to `error.stack`"},{"is_enabled":true,"grok":{"support_rules":"_date (?:%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSSSS\"):date}|%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSS\"):date})\n_status %{word:level}\n_thread_id %{word:logger.thread_id}\n_thread_name %{notSpace:logger.thread_name}\n_logger_name %{notSpace:logger.name}\n_ruby_log_prefix %{word}, \\[%{_date} #%{_thread_id}\\]\\s+%{_status}\\s+--\\s+(?:%{_logger_name})?:(?:\\s+%{_trace_rule})?\n_trace_rule \\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\]\n_datadog_prefix \\[%{date(\"yyyy-MM-dd HH:mm:ss Z\"):date}\\]\\[%{word:application}\\]\\[%{_status}\\]%{_trace_rule}\n_activate_status %{word:active_directory.process_status}\n","match_rules":"# Active Directory Rails logs\n\ncompleted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{integer:http.status_code}(?: (?:%{word}|Internal Server Error))? in %{number:duration}ms \\((?>Views: %{number:views}ms \\| )?ActiveRecord: %{number:activerecord}ms\\)\n\nprocessing_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} by %{notSpace:processor}.*\n\nstarted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{word:http.method} \"%{notSpace:http.url_details.path}\" for %{ipOrHost:network.client.ip}.*\n\ndatadog_format %{_datadog_prefix} %{data::keyvalue(\"=\",\"/\")}(?>(\\n|\\t)%{data:error.stack})?\n\nreceived_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?Received: %{data::json}\n\n## Default Ruby formats\nRuby_default %{_ruby_log_prefix}\\s+%{data:error.message}(?>(\\n|\\t)%{data:error.stack})?\n\nRuby_keyvalue %{data::keyvalue(\"=\",\"/\")}\n\n# Extra samples:\n#I, [1999-03-03T02:34:24.895701 #19074]  INFO -- Main: Some error.\n## Datadog Format\n#[dd.trace_id=1321281354128614668 dd.span_id=5986620922286636160] Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.0ms)\n"},"name":"Parsing Ruby Default formats","source":"message","samples":["I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 6.2ms)","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Started GET \"/api/v1/example/query\" for 123.123.123.123 at 1999-03-03 02:34:24+0000","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Processing by MyCheck::CheckController#index as JSON","I, [2018-06-27T08:01:52.991728 #1]  INFO -- : Received: {\"action\":\"cancel\",\"order\":{\"id\":1234567,\"timestamp\":153012312}}","[2019-01-16 15:38:45 +0000][my_app][WARN][dd.trace_id=7396234561907730428 dd.span_id=1152346429682372911] This is a test message!"],"type":"grok-parser"},{"is_enabled":true,"sources":["date"],"type":"date-remapper","name":"Define `date` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Stack trace","source":"error.stack","samples":["ZeroDivisionError: divided by 0\nfrom devide.rb:6:in `divide`  \nfrom devide.rb:14:in `call`\nfrom devide.rb:18:in `<main>`\n"],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"http.method","source_type":"attribute","target_type":"attribute","sources":["method"],"preserve_source":false,"type":"attribute-remapper","name":"Map `method` to `http.method`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.url_details.path","source_type":"attribute","target_type":"attribute","sources":["path"],"preserve_source":false,"type":"attribute-remapper","name":"Map `path` to `http.url_details.path`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.status_code","source_type":"attribute","target_type":"attribute","sources":["status"],"preserve_source":false,"type":"attribute-remapper","name":"Map `status` to `http.status_code`"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"},{"is_enabled":true,"name":"Convert duration unit ms to ns","expression":"duration*1000000","is_replace_missing":false,"type":"arithmetic-processor","target":"duration"}]}]
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines
    method: GET
  response:
    body: |
      [{"is_enabled":true,"name":"python","filter":{"query":"source:python"},"is_read_only":true,"type":"pipeline","id":"rTxbr2MpQsSCEtn66XmwnQ","processors":[{"is_enabled":true,"grok":{"support_rules":"_datadog_prefix (%{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}|%{date(\"yyyy-MM-dd H:mm:ss,SSS\"):timestamp}) %{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{notSpace:filename}:%{number:lineno}\\]\\s+\\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\] -\n\n_python_prefix %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{integer:process.id}\\]\n","match_rules":"traceback_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}Traceback \\(most recent call last\\):(?s)\\s*%{data:error.stack}\n\npython_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}\n\npython_fallback %{date(\"yyyy-MM-dd'T'HH:mm:ss','SSS\"):timestamp}\\s+%{word:levelname}\\s+%{data::keyvalue}((\\n|\\t)%{data:error.stack})?\n\n#Samples\n#2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log\n\n# Datadog format\n#2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext\n"},"name":"Parsing python default format","source":"message","samples":["2017-12-19T14:37:58,995 INFO  [process.name] [20081] this is my python log","2019-01-07 15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235] - Hook: teardown_appcontext","2020-03-20 14:15:07,124 INFO [root] [app.py:78] [dd.service=excelsior dd.env=prod dd.version=abc123 dd.trace_id=9659687005038611690 dd.span_id=6632586210846541907] - This is a test of info logs","2021-07-09 8:58:31,137 WARNING [root] [views.py:42] [dd.service=datadoggo dd.env=prod dd.version=abc546 dd.trace_id=2296056412404370861 dd.span_id=16818077145337196836] - New post view.","2017-12-26T10:44:59,311 ERROR [dd.dogweb.lib.static_asset] [20081] rid=b0RV4J Error reading statics_version file.Traceback (most recent call last): File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["levelname"],"type":"status-remapper","name":"Define `levelname` as the official status of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["traceback"],"preserve_source":false,"type":"attribute-remapper","name":"Map `traceback` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `name` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["threadName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `threadName` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"parsing_traceback File \"%{notSpace:filename}\", line %{integer:lineno}.*\\s+%{regex(\"[a-zA-Z]*Error[a-zA-Z]*\"):error.kind}: %{data:error.message}\n"},"name":"Parsing python traceback","source":"error.stack","samples":["File \"/home/pythonrepo/lib/asset.py\", line 16, in version    with open(\"/etc/statics_version.txt\", \"r\") as statics_version_file: IOError: [Errno 2] No such file or directory: /etc/statics_version.txt"],"type":"grok-parser"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"my first pipeline","filter":{"query":"source:redis"},"is_read_only":false,"type":"pipeline","id":"2QGdoZWESWi6WArjxl4cxg","processors":[{"is_enabled":true,"sources":["verbose"],"type":"date-remapper","name":"Define date"},{"is_enabled":true,"name":"processor from nested pipeline","expression":"(time1-time2)*1000","is_replace_missing":false,"type":"arithmetic-processor","target":"my_arithmetic"},{"is_enabled":true,"type":"category-processor","name":"Categorise severity level","categories":[{"filter":{"query":"@severity: \"-\""},"name":"verbose"},{"filter":{"query":"@severity: \".\""},"name":"debug"}],"target":"redis.severity"},{"is_enabled":true,"grok":{"support_rules":"date_parser %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}","match_rules":"rule %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}"},"name":"Parsing Stack traces","source":"message","samples":[],"type":"grok-parser"},{"is_enabled":true,"filter":{"query":"source:kafka"},"type":"pipeline","name":"my nested pipeline","processors":[{"is_enabled":true,"name":"Define url parser","sources":["http_test"],"target":"http_test.details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Define user agent parser","sources":["http_agent"],"is_encoded":false,"type":"user-agent-parser","target":"http_agent.details"}]},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"geo ip parse","sources":["ip1"],"type":"geo-ip-parser","target":"ip.address"},{"is_enabled":false,"name":"","source":"ip1","lookup_table":["key,value"],"type":"lookup-processor","target":"ip.address"},{"is_enabled":true,"name":"lookup processor with optional fields","source":"ip2","lookup_table":["key,value"],"default_lookup":"default","type":"lookup-processor","target":"ip.address"}]},{"is_enabled":true,"name":"sample pipeline update","filter":{"query":"source:foo"},"is_read_only":false,"type":"pipeline","id":"0mc2Xh9XTOKHDRooX8oU7Q","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"Rule %{word:my_word2} %{number:my_float2}"},"name":"sample grok parser","source":"message","samples":["Rule fooo 1.2"],"type":"grok-parser"},{"is_enabled":true,"sources":["msg"],"type":"message-remapper","name":"sample message remapper"}]},{"is_enabled":true,"name":"Web Browser logs","filter":{"query":"source:browser"},"is_read_only":true,"type":"pipeline","id":"cgS5obmTSi6NgGX05lf0tg","processors":[{"is_enabled":true,"name":"Parsing the backend endpoint url","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"name":"Parsing the url of the current page","sources":["view.url"],"target":"view.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"Parsing the url of the previous page","sources":["view.referrer"],"target":"view.referrer_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"ip_processing_behavior":"do-nothing","name":"","sources":["network.client.ip"],"type":"geo-ip-parser","target":"network.client.geoip"}]},{"is_enabled":true,"name":"Java","filter":{"query":"source:java"},"is_read_only":true,"type":"pipeline","id":"JW6WRX6zSYO6P27n-R85vw","processors":[{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status %{word:level}\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2000-09-07 14:07:41,508 [main] INFO  MyApp - Entering application.","54 [main] INFO MyApp.foo.bar - Entering application.","2000-09-07 14:07:44 INFO org.foo.bar:32 - Entering application.","2000-09-07 14:07:44.452 [main] INFO org.foo.bar - Entering application."],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_gc_event_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\n_parallel \\[Parallel\\sTime:\\s%{number:parallel_time}\\sms,\\sGC\\sWorkers:\\s%{number:gc_worker.count}]\n\n_gc_worker_start \\[GC\\sWorker\\sStart\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.start.min},\\sAvg:\\s%{number:gc_worker.start.avg},\\sMax:\\s%{number:gc_worker.start.max},\\sDiff:\\s%{number:gc_worker.start.diff}]\n\n_ext_root_scanning \\[Ext\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:exit_root_scanning.min},\\sAvg:\\s%{number:exit_root_scanning.avg},\\sMax:\\s%{number:exit_root_scanning.max},\\sDiff:\\s%{number:exit_root_scanning.diff},\\sSum:\\s%{number:exit_root_scanning.sum}]\n\n_update_rs \\[Update\\sRS\\s\\(ms\\):\\sMin:\\s%{number:update_rs.min},\\sAvg:\\s%{number:update_rs.avg},\\sMax:\\s%{number:update_rs.max},\\sDiff:\\s%{number:update_rs.diff},\\sSum:\\s%{number:update_rs.sum}]\n\n_gcc_event %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}:%{notSpace}\\s\\[%{regex(\"([^\\\\]]*)\"):event.type}]\n\n_processed_buffer \\[Processed\\sBuffers:\\sMin:\\s%{number:processed_buffer.min},\\sAvg:\\s%{number:processed_buffer.avg},\\sMax:\\s%{number:processed_buffer.max},\\sDiff:\\s%{number:processed_buffer.diff},\\sSum:\\s%{number:processed_buffer.sum}]\n\n_scan_rs \\[Scan\\sRS\\s\\(ms\\):\\sMin:\\s%{number:scan_rs.min},\\sAvg:\\s%{number:scan_rs.avg},\\sMax:\\s%{number:scan_rs.max},\\sDiff:\\s%{number:scan_rs.diff},\\sSum:\\s%{number:scan_rs.sum}]\n\n_code_root_scan \\[Code\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:code_root.scan.min},\\sAvg:\\s%{number:code_root.scan.avg},\\sMax:\\s%{number:code_root.scan.max},\\sDiff:\\s%{number:code_root.scan.diff},\\sSum:\\s%{number:code_root.scan.sum}]\n\n_object_copy \\[Object\\sCopy\\s\\(ms\\):\\sMin:\\s%{number:object_copy.min},\\sAvg:\\s%{number:object_copy.avg},\\sMax:\\s%{number:object_copy.max},\\sDiff:\\s%{number:object_copy.diff},\\sSum:\\s%{number:object_copy.sum}]\n\n_termination \\[Termination\\s\\(ms\\):\\sMin:\\s%{number:termination.min},\\sAvg:\\s%{number:termination.avg},\\sMax:\\s%{number:termination.max},\\sDiff:\\s%{number:termination.diff},\\sSum:\\s%{number:termination.sum}]\n\n_termination_attempts \\[Termination\\sAttempts:\\sMin:\\s%{number:termination.attempts.min},\\sAvg:\\s%{number:termination.attempts.avg},\\sMax:\\s%{number:termination.attempts.max},\\sDiff:\\s%{number:termination.attempts.diff},\\sSum:\\s%{number:termination.attempts.sum}]\n\n_gc_worker_other \\[GC\\sWorker\\sOther\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.other.min},\\sAvg:\\s%{number:gc_worker.other.avg},\\sMax:\\s%{number:gc_worker.other.max},\\sDiff:\\s%{number:gc_worker.other.diff},\\sSum:\\s%{number:gc_worker.other.sum}]\n\n_gc_worker_total \\[GC\\sWorker\\sTotal\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.total.min},\\sAvg:\\s%{number:gc_worker.total.avg},\\sMax:\\s%{number:gc_worker.total.max},\\sDiff:\\s%{number:gc_worker.total.diff},\\sSum:\\s%{number:gc_worker.total.sum}]\n\n_gc_worker_end \\[GC\\sWorker\\sEnd\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.end.min},\\sAvg:\\s%{number:gc_worker.end.avg},\\sMax:\\s%{number:gc_worker.end.max},\\sDiff:\\s%{number:gc_worker.end.diff}]\n\n_code_root_fixup \\[Code\\sRoot\\sFixup:\\s%{number:code_root.fixup}\\sms]\n\n_code_root_purge \\[Code\\sRoot\\sPurge:\\s%{number:code_root.purge}\\sms]\n\n_clear_ct \\[Clear\\sCT:\\s%{number:clear_ct}\\sms]\n\n_other \\[Other:\\s%{number:other}\\sms]\n\n_choose_cset \\[Choose\\sCSet:\\s%{number:choose_cset}\\sms]\n\n_ref_proc \\[Ref\\sProc:\\s%{number:ref.proc}\\sms]\n\n_ref_enq \\[Ref\\sEnq:\\s%{number:ref.enq}\\sms]\n\n_redirty_cards \\[Redirty\\sCards:\\s%{number:redirty_cards}\\sms]\n\n_humongous_register \\[Humongous\\sRegister:\\s%{number:humongous_register}\\sms]\n\n_humongous_reclaim \\[Humongous\\sReclaim:\\s%{number:humongous_reclaim}\\sms]\n\n_free \\[Free\\sCSet:\\s%{number:free}\\sms]\n\n_memory_usage \\[Eden: (%{number:eden.memory_before}M|%{number:eden.memory_before:scale(1000)}G)\\((%{number:eden.memory_allocated_before}M|%{number:eden.memory_allocated_before:scale(1000)}G)\\)->%{number:eden.memory_after}B\\((%{number:eden.memory_allocated_after}M|%{number:eden.memory_allocated_after:scale(1000)}G)\\)\\sSurvivors:\\s%{number:survivor.memory_before}M->%{number:survivor.memory_after}M\\sHeap:\\s(%{number:heap.memory_before}M|%{number:heap.memory_before:scale(1000)}G)\\((%{number:heap.memory_allocated_before}M|%{number:heap.memory_allocated_before:scale(1000)}G)\\)->%{number:heap.memory_after}M\\((%{number:heap.memory_allocated_after}M|%{number:heap.memory_allocated_after:scale(1000)}G)\\)]\n\n_times \\[Times:\\suser=%{number:times.user}\\ssys=%{number:times.system},\\sreal=%{number:times.real}\\ssecs]\n","match_rules":"gc_nonverbose_basic \\[%{notSpace}\\]\\[%{word:level}\\s*\\]\\[%{word:gc.type}\\] GC\\(%{number:gc.iteration}\\) %{data:gc.action} \\(%{data:gc.phase}\\) %{number:heap.memory_before}M\\-\\>%{number:heap.memory_after}M\\(%{number:heap.memory_total}M\\) %{number:duration:scale(1000000)}ms\n\ngc_action_phase_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\nnon_gc_action_duration %{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[%{regex(\"([^,]*)\"):gc.action}(,\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\ngc_verbose %{_gc_event_phase_duration}(\\r|\\n|\\s)*%{_parallel}(\\r|\\n|\\s)*%{_gc_worker_start}(\\r|\\n|\\s)*%{_ext_root_scanning}(\\r|\\n|\\s)*%{_update_rs}(\\r|\\n|\\s)*%{_processed_buffer}(\\r|\\n|\\s)*%{_scan_rs}(\\r|\\n|\\s)*%{_code_root_scan}(\\r|\\n|\\s)*%{_object_copy}(\\r|\\n|\\s)*%{_termination}(\\r|\\n|\\s)*%{_termination_attempts}(\\r|\\n|\\s)*%{_gc_worker_other}(\\r|\\n|\\s)*%{_gc_worker_total}(\\r|\\n|\\s)*%{_gc_worker_end}(\\r|\\n|\\s)*%{_code_root_fixup}(\\r|\\n|\\s)*%{_code_root_purge}(\\r|\\n|\\s)*%{_clear_ct}(\\r|\\n|\\s)*%{_other}(\\r|\\n|\\s)*%{_choose_cset}(\\r|\\n|\\s)*%{_ref_proc}(\\r|\\n|\\s)*%{_ref_enq}(\\r|\\n|\\s)*%{_redirty_cards}(\\r|\\n|\\s)*%{_humongous_register}(\\r|\\n|\\s)*%{_humongous_reclaim}(\\r|\\n|\\s)*%{_free}(\\r|\\n|\\s)*%{_memory_usage}(\\r|\\n|\\s)*%{_times}\n\n#Parse Java 11 GC logs formats\ngc_new_format \\[%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"):timestamp}\\]\\[%{notSpace:status}\\]\\[%{notSpace:gc.type}(\\s)?\\]\\sGC\\(%{number:gc.iteration}\\)\\s%{data:gc.action}(\\s%{number:duration:scale(1000000)}ms)?\n"},"name":"Parsing GC logs","source":"message","samples":["[9237.485s][info   ][gc] GC(835) Pause Young (G1 Evacuation Pause) 4937M->645M(7168M) 17.476ms","2019-03-20T14:36:30.111+0000: 41.098: [GC concurrent-mark-end, 0.0272767 secs]","2019-03-20T14:36:30.111+0000: 41.071: [GC concurrent-mark-start]","2019-03-20T14:36:30.111+0000: 41.099: [Finalize Marking, 0.0011661 secs]"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `stack_trace` to `error.stack`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger_name","loggerName"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger_name`, `loggerName` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread_name"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread_name` to `logger.thread_name`"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Java Stack traces","source":"error.stack","samples":["java.lang.NullPointerException: this is my error message\n at com.hello.world.flow.Checker.checkCacheEntryyy(Checker.java: 154)\n"],"type":"grok-parser"},{"is_enabled":true,"name":"Calculate GC memory freed","expression":"(heap.memory_before - heap.memory_after)","is_replace_missing":false,"type":"arithmetic-processor","target":"gc.memory_freed"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env","contextMap.dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env`, `contextMap.dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version","contextMap.dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version`, `contextMap.dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service","contextMap.dd.service"],"type":"service-remapper","name":"Define `dd.service`, `contextMap.dd.service` as the official service of the log"}]},{"is_enabled":true,"name":"Datadog Agent","filter":{"query":"source:(agent OR datadog-agent OR datadog-agent-cluster-worker OR datadog-cluster-agent OR process-agent OR security-agent OR system-probe OR trace-agent OR cluster-agent)"},"is_read_only":true,"type":"pipeline","id":"4I6FNy5GToqi2fKVAqNZJw","processors":[{"is_enabled":true,"grok":{"support_rules":"","match_rules":"agent_rule         %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\) \\|( %{data::keyvalue(\":\")} \\|)?( - \\|)?( \\(%{notSpace:pyFilename}:%{number:pyLineno}\\) \\|)?%{data}\nagent_rule_pre_611 %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{word:level} \\| \\(%{notSpace:filename}:%{number:lineno} in %{word:process}\\)%{data}\njmxfetch_rule      %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\| %{notSpace:agent} \\| %{word:level}\\s+\\| %{word:class} \\| %{data}\n"},"name":"Parsing Datadog Agent logs","source":"message","samples":["2020-07-01 09:48:14 UTC | CORE | INFO | (pkg/collector/runner/runner.go:327 in work) | check:network,type:core | Done running check","2020-09-15 10:00:07 UTC | CORE | INFO | (pkg/collector/python/datadog_agent.go:120 in LogMessage) | kafka_cluster_status:8ca7b736f0aa43e5 | (kafka_cluster_status.py:213) | Checking for out of sync partition replicas","2019-04-08 13:53:48 UTC | TRACE | INFO | (pkg/trace/agent/agent.go:145 in loop) | exiting","2019-02-01 16:59:41 UTC | INFO | (connection_manager.go:124 in CloseConnection) | Connection closed","2020-11-18 10:31:13 UTC | JMX | INFO  | App | Successfully initialized instance: cassandra-localhost-7199"],"type":"grok-parser"},{"is_enabled":true,"sources":["timestamp"],"type":"date-remapper","name":"Define `timestamp` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"}]},{"is_enabled":true,"name":"test-oneof","filter":{"query":"kube_deployment:synthetics-* OR service:synthetics* OR service:ingress-haproxy-synthetics"},"is_read_only":false,"type":"pipeline","id":"zpVyok_OSzWrvV38NS-YAA","processors":[{"is_enabled":true,"filter":{"query":"source:go OR log_format:dd-go-std"},"type":"pipeline","name":"oneof go","processors":[]},{"is_enabled":true,"override_on_conflict":false,"target":"synthetics_test_url.host","source_type":"attribute","target_type":"attribute","sources":["host"],"preserve_source":true,"type":"attribute-remapper","name":"oneof processor"}]},{"is_enabled":true,"name":"Sinatra","filter":{"query":"source:sinatra"},"is_read_only":true,"type":"pipeline","id":"vL--Mbs7SceY84ADEYu40w","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access (%{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}|%{date(\"dd/MMM/yyyy HH:mm:ss\"):date_access})\n_duration %{number:duration:scale(1000000000)}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)( %{_duration}|-)?\n"},"name":"Parsing Sinatra logs","source":"message","samples":["127.0.0.1 - - [15/Jul/2018:17:41:40 +0000] \"GET /uptime_status HTTP/1.1\" 200 34 0.0004","127.0.0.1 - - [15/Jul/2018 23:40:31] \"GET /uptime_status HTTP/1.1\" 200 6997 1.8096"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category"],"type":"status-remapper","name":"Define `http.status_category` as the official status of the log"}]},{"is_enabled":true,"name":"Nginx","filter":{"query":"source:nginx"},"is_read_only":true,"type":"pipeline","id":"RSbXaJxLS8WSZbAV6vJnYg","processors":[{"is_enabled":true,"grok":{"support_rules":"_auth %{notSpace:http.auth:nullIf(\"-\")}\n_bytes_written %{integer:network.bytes_written}\n_client_ip %{ipOrHost:network.client.ip}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n_url %{notSpace:http.url}\n_ident %{notSpace:http.ident:nullIf(\"-\")}\n_user_agent %{regex(\"[^\\\\\\\"]*\"):http.useragent}\n_referer %{notSpace:http.referer}\n_status_code %{integer:http.status_code}\n_method %{word:http.method}\n_date_access %{date(\"dd/MMM/yyyy:HH:mm:ss Z\"):date_access}\n_x_forwarded_for %{regex(\"[^\\\\\\\"]*\"):http._x_forwarded_for:nullIf(\"-\")}\n","match_rules":"access.common %{_client_ip} %{_ident} %{_auth} \\[%{_date_access}\\] \"(?>%{_method} |)%{_url}(?> %{_version}|)\" %{_status_code} (?>%{_bytes_written}|-)\n\naccess.combined %{access.common} (%{number:duration:scale(1000000000)} )?\"%{_referer}\" \"%{_user_agent}\"( \"%{_x_forwarded_for}\")?.*\n\nerror.format %{date(\"yyyy/MM/dd HH:mm:ss\"):date_access} \\[%{word:level}\\] %{data:error.message}(, %{data::keyvalue(\": \",\",\")})?\n"},"name":"Parsing Nginx logs","source":"message","samples":["127.0.0.1 - frank [13/Jul/2016:10:55:36 +0000] \"GET /apache_pb.gif HTTP/1.0\" 200 2326","172.17.0.1 - - [06/Jan/2017:16:16:37 +0000] \"GET /datadoghq/company?test=var1%20Pl HTTP/1.1\" 200 612 \"http://www.perdu.com/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36\" \"-\"","2017/09/26 14:36:50 [error] 8409#8409: *317058 \"/usr/share/nginx/html/sql/sql-admin/index.html\" is not found (2: No such file or directory), client: 217.92.148.44, server: localhost, request: \"HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1\", host: \"174.138.82.103\""],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"network.client.ip","source_type":"attribute","target_type":"attribute","sources":["client"],"preserve_source":false,"type":"attribute-remapper","name":"Map `client` to `network.client.ip`"},{"is_enabled":true,"grok":{"support_rules":"_method %{word:http.method}\n_url %{notSpace:http.url}\n_version HTTP\\/%{regex(\"\\\\d+\\\\.\\\\d+\"):http.version}\n","match_rules":"request_parsing (?>%{_method} |)%{_url}(?> %{_version}|)\n"},"name":"Parsing Nginx Error log requests","source":"request","samples":["HEAD http://174.138.82.103:80/sql/sql-admin/ HTTP/1.1"],"type":"grok-parser"},{"is_enabled":true,"name":"","sources":["http.url"],"target":"http.url_details","type":"url-parser","normalize_ending_slashes":false},{"is_enabled":true,"name":"","sources":["http.useragent"],"is_encoded":false,"type":"user-agent-parser","target":"http.useragent_details"},{"is_enabled":true,"sources":["date_access"],"type":"date-remapper","name":"Define `date_access` as the official date of the log"},{"is_enabled":true,"type":"category-processor","name":"Categorise status code","categories":[{"filter":{"query":"@http.status_code:[200 TO 299]"},"name":"OK"},{"filter":{"query":"@http.status_code:[300 TO 399]"},"name":"notice"},{"filter":{"query":"@http.status_code:[400 TO 499]"},"name":"warning"},{"filter":{"query":"@http.status_code:[500 TO 599]"},"name":"error"}],"target":"http.status_category"},{"is_enabled":true,"sources":["http.status_category","level"],"type":"status-remapper","name":"Define `http.status_category`, `level` as the official status of the log"}]},{"is_enabled":false,"name":"Jenkins","filter":{"query":"source:jenkins service:jenkins"},"is_read_only":false,"type":"pipeline","id":"LWIrk9TLT3Kp9hnIbWBs2w","processors":[{"is_enabled":true,"filter":{"query":"@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Main Logs","processors":[{"is_enabled":false,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss.SSS+0000\"):date}\n_id \\[id\\=%{integer:id}\\]\n_level %{word:level}\n_logger (\\w+|\\.)+?%{regex(\"([a-zA-Z0-9]+[.][a-zA-Z0-9]+)\"):logger.name}\\#%{data:logger.label}\n_message %{data:message}\n","match_rules":"rule %{_date}\\s+%{_id}\\s+%{_level}\\s+%{_logger}\\:\\s+%{_message}"},"name":"parse the log message","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"},{"is_enabled":true,"grok":{"support_rules":"_date %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name %{notSpace:logger.thread_name}\n_status (%{word:level}|\\[%{word:level}\\s*\\])\n_logger_name %{notSpace:logger.name}\n_context %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+(\\(%{_logger_name}:%{_line}\\)|%{_logger_name})\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_slf4j %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_log4j %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\njava_fallback (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id} )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_custom_jenkins (%{_date}|%{_date_ms}|%{_date_slf4j})(\\+0000)?\\s+\\[(id=)?%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}:\\s+?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"name":"Parsing Java Default formats","source":"message","samples":["2020-09-11 18:39:27.168+0000 [id=301]\tWARNING\thudson.model.RunMap#retrieve: could not load /var/lib/jenkins/jobs/process_label/builds/11396","2020-09-11 17:53:17.279+0000 [id=1882974]\tINFO\thudson.plugins.ec2.EC2Cloud#log: The instance EC2 (Platform Nodes) - Code Pipeline Dedicated Large (i-00ccbfe7626e67d47) has a blank console. Maybe the console is yet not available. If enough time has passed, consider changing the key verification strategy or the AMI used by one printing out the host key in the instance console","2020-09-11 18:34:55.043+0000 [id=1889960]\tINFO\th.plugins.ec2.EC2OndemandSlave#lambda$terminate$0: Removed EC2 instance from jenkins master: i-00c77ed6825a0283a","2020-09-11 18:11:29.118+0000 [id=1885120]\tSEVERE\to.d.j.p.datadog.DatadogUtilities#severe: An unexpected error occurred","2020-09-11 18:35:24.327+0000 [id=1889974]\tINFO\th.p.ec2.EC2RetentionStrategy#taskAccepted: Agent i-09d6bcf24ed8d123f has 9 builds left"],"type":"grok-parser"}]},{"is_enabled":true,"filter":{"query":"-@tailed_path:\"/var/lib/jenkins/logs/jenkins.log\" source:jenkins service:jenkins"},"type":"pipeline","name":"Jenkins Job Logs","processors":[{"is_enabled":true,"grok":{"support_rules":"_job %{data:jenkins.job}\n_build %{data:jenkins.build}\n","match_rules":"pipeline_job_rule /var/lib/jenkins/jobs/pipeline/jobs/%{data:jenkins.pipeline}/jobs/%{_job}/builds/%{_build}/log\nnon_pipeline_job_rule /var/lib/jenkins/jobs/%{_job}/builds/%{_build}/log\n"},"name":"parse tailed_path","source":"tailed_path","samples":["/var/lib/jenkins/jobs/pipeline/jobs/admin/jobs/venmo-platform-pr-controller/builds/52228/log","/var/lib/jenkins/jobs/pipeline/jobs/default/jobs/venmo-platform-pr-foundation-swagger-missing-descriptions/builds/5210/log","/var/lib/jenkins/jobs/update_datadog_metrics/builds/49760/log"],"type":"grok-parser"}]}]},{"is_enabled":true,"name":"Ruby","filter":{"query":"source:ruby"},"is_read_only":true,"type":"pipeline","id":"TL1aouiMTNmpCCN1iZxoSA","processors":[{"is_enabled":true,"override_on_conflict":false,"target":"logger.name","source_type":"attribute","target_type":"attribute","sources":["logger"],"preserve_source":false,"type":"attribute-remapper","name":"Map `logger` to `logger.name`"},{"is_enabled":true,"override_on_conflict":false,"target":"logger.thread_name","source_type":"attribute","target_type":"attribute","sources":["thread"],"preserve_source":false,"type":"attribute-remapper","name":"Map `thread` to `logger.thread_name`"},{"is_enabled":true,"override_on_conflict":false,"target":"error.stack","source_type":"attribute","target_type":"attribute","sources":["exception","stack_trace"],"preserve_source":false,"type":"attribute-remapper","name":"Map `exception`, `stack_trace` to `error.stack`"},{"is_enabled":true,"grok":{"support_rules":"_date (?:%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSSSSS\"):date}|%{date(\"yyyy-MM-dd'T'HH:mm:ss.SSS\"):date})\n_status %{word:level}\n_thread_id %{word:logger.thread_id}\n_thread_name %{notSpace:logger.thread_name}\n_logger_name %{notSpace:logger.name}\n_ruby_log_prefix %{word}, \\[%{_date} #%{_thread_id}\\]\\s+%{_status}\\s+--\\s+(?:%{_logger_name})?:(?:\\s+%{_trace_rule})?\n_trace_rule \\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id} dd.span_id=%{word:dd.span_id}\\]\n_datadog_prefix \\[%{date(\"yyyy-MM-dd HH:mm:ss Z\"):date}\\]\\[%{word:application}\\]\\[%{_status}\\]%{_trace_rule}\n_activate_status %{word:active_directory.process_status}\n","match_rules":"# Active Directory Rails logs\n\ncompleted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{integer:http.status_code}(?: (?:%{word}|Internal Server Error))? in %{number:duration}ms \\((?>Views: %{number:views}ms \\| )?ActiveRecord: %{number:activerecord}ms\\)\n\nprocessing_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} by %{notSpace:processor}.*\n\nstarted_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?%{_activate_status} %{word:http.method} \"%{notSpace:http.url_details.path}\" for %{ipOrHost:network.client.ip}.*\n\ndatadog_format %{_datadog_prefix} %{data::keyvalue(\"=\",\"/\")}(?>(\\n|\\t)%{data:error.stack})?\n\nreceived_rule (?>%{_ruby_log_prefix}\\s+|%{_trace_rule}\\s+)?Received: %{data::json}\n\n## Default Ruby formats\nRuby_default %{_ruby_log_prefix}\\s+%{data:error.message}(?>(\\n|\\t)%{data:error.stack})?\n\nRuby_keyvalue %{data::keyvalue(\"=\",\"/\")}\n\n# Extra samples:\n#I, [1999-03-03T02:34:24.895701 #19074]  INFO -- Main: Some error.\n## Datadog Format\n#[dd.trace_id=1321281354128614668 dd.span_id=5986620922286636160] Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.0ms)\n"},"name":"Parsing Ruby Default formats","source":"message","samples":["I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 6.2ms)","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Started GET \"/api/v1/example/query\" for 123.123.123.123 at 1999-03-03 02:34:24+0000","I, [1999-03-03T02:34:24.895701 #19074]  INFO -- : Processing by MyCheck::CheckController#index as JSON","I, [2018-06-27T08:01:52.991728 #1]  INFO -- : Received: {\"action\":\"cancel\",\"order\":{\"id\":1234567,\"timestamp\":153012312}}","[2019-01-16 15:38:45 +0000][my_app][WARN][dd.trace_id=7396234561907730428 dd.span_id=1152346429682372911] This is a test message!"],"type":"grok-parser"},{"is_enabled":true,"sources":["date"],"type":"date-remapper","name":"Define `date` as the official date of the log"},{"is_enabled":true,"sources":["level"],"type":"status-remapper","name":"Define `level` as the official status of the log"},{"is_enabled":true,"grok":{"support_rules":"","match_rules":"error_rule %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"name":"Parsing Stack trace","source":"error.stack","samples":["ZeroDivisionError: divided by 0\nfrom devide.rb:6:in `divide`  \nfrom devide.rb:14:in `call`\nfrom devide.rb:18:in `<main>`\n"],"type":"grok-parser"},{"is_enabled":true,"override_on_conflict":false,"target":"http.method","source_type":"attribute","target_type":"attribute","sources":["method"],"preserve_source":false,"type":"attribute-remapper","name":"Map `method` to `http.method`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.url_details.path","source_type":"attribute","target_type":"attribute","sources":["path"],"preserve_source":false,"type":"attribute-remapper","name":"Map `path` to `http.url_details.path`"},{"is_enabled":true,"override_on_conflict":false,"target":"http.status_code","source_type":"attribute","target_type":"attribute","sources":["status"],"preserve_source":false,"type":"attribute-remapper","name":"Map `status` to `http.status_code`"},{"is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper","name":"Define `dd.trace_id` as the official trace ID of the log"},{"is_enabled":true,"override_on_conflict":true,"target":"env","source_type":"attribute","target_type":"tag","sources":["dd.env"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.env` to tag `env`"},{"is_enabled":true,"override_on_conflict":true,"target":"version","source_type":"attribute","target_type":"tag","sources":["dd.version"],"preserve_source":false,"type":"attribute-remapper","name":"Map attribute `dd.version` to tag `version`"},{"is_enabled":true,"sources":["dd.service"],"type":"service-remapper","name":"Define `dd.service` as the official service of the log"},{"is_enabled":true,"name":"Convert duration unit ms to ns","expression":"duration*1000000","is_replace_missing":false,"type":"arithmetic-processor","target":"duration"}]}]
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
