---
version: 1
interactions:
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
    method: GET
  response:
    body: |
      {"data":[{"id":"jdZrilSJQLqzb6Cu7aub9Q","attributes":{"name":"Application Security Monitoring Default","rate":1.0,"enabled":false,"filter_type":"spans-appsec-sampling-processor","filter":{"query":"@appsec.event:true"},"editable":true,"execution_order":1,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"7RBOb7dLSYWI01yc3pIH8w","attributes":{"name":"Error Default","rate":1.0,"enabled":true,"filter_type":"spans-errors-sampling-processor","filter":{"query":"status:error"},"editable":true,"execution_order":2,"modified_by":"frog@datadoghq.com","modified_at":1695634009,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"cQ9X4t6OROuFAgx4pDlVjw","attributes":{"name":"Dynamic Instrumentation Default","rate":1.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"operation_name:dd.dynamic.span"},"editable":true,"execution_order":3,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"}]}
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
    method: GET
  response:
    body: |
      {"data":[{"id":"jdZrilSJQLqzb6Cu7aub9Q","attributes":{"name":"Application Security Monitoring Default","rate":1.0,"enabled":false,"filter_type":"spans-appsec-sampling-processor","filter":{"query":"@appsec.event:true"},"editable":true,"execution_order":1,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"7RBOb7dLSYWI01yc3pIH8w","attributes":{"name":"Error Default","rate":1.0,"enabled":true,"filter_type":"spans-errors-sampling-processor","filter":{"query":"status:error"},"editable":true,"execution_order":2,"modified_by":"frog@datadoghq.com","modified_at":1695634009,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"cQ9X4t6OROuFAgx4pDlVjw","attributes":{"name":"Dynamic Instrumentation Default","rate":1.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"operation_name:dd.dynamic.span"},"editable":true,"execution_order":3,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"ZDCZV3KiSV6lRWIeR5fFrw","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1699619274","rate":0.1,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 service:my-service"},"editable":true,"execution_order":4,"modified_by":"frog@datadoghq.com","modified_at":1699619276,"created_by":"frog@datadoghq.com","created_at":1699619276},"type":"apm_retention_filter"}]}
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: |
      {"data":[{"id":"ZDCZV3KiSV6lRWIeR5fFrw","type":"apm_retention_filter"},{"id":"cQ9X4t6OROuFAgx4pDlVjw","type":"apm_retention_filter"},{"id":"7RBOb7dLSYWI01yc3pIH8w","type":"apm_retention_filter"},{"id":"jdZrilSJQLqzb6Cu7aub9Q","type":"apm_retention_filter"}]}
    form: {}
    headers:
      Accept:
      - '*/*'
      Content-Type:
      - application/json
    url: https://api.datadoghq.com/api/v2/apm/config/retention-filters-execution-order
    method: PUT
  response:
    body: |
      {}
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
    method: GET
  response:
    body: |
      {"data":[{"id":"ZDCZV3KiSV6lRWIeR5fFrw","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1699619274","rate":0.1,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 service:my-service"},"editable":true,"execution_order":1,"modified_by":"frog@datadoghq.com","modified_at":1699619276,"created_by":"frog@datadoghq.com","created_at":1699619276},"type":"apm_retention_filter"},{"id":"cQ9X4t6OROuFAgx4pDlVjw","attributes":{"name":"Dynamic Instrumentation Default","rate":1.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"operation_name:dd.dynamic.span"},"editable":true,"execution_order":2,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"7RBOb7dLSYWI01yc3pIH8w","attributes":{"name":"Error Default","rate":1.0,"enabled":true,"filter_type":"spans-errors-sampling-processor","filter":{"query":"status:error"},"editable":true,"execution_order":3,"modified_by":"frog@datadoghq.com","modified_at":1695634009,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"jdZrilSJQLqzb6Cu7aub9Q","attributes":{"name":"Application Security Monitoring Default","rate":1.0,"enabled":false,"filter_type":"spans-appsec-sampling-processor","filter":{"query":"@appsec.event:true"},"editable":true,"execution_order":4,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"}]}
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
    method: GET
  response:
    body: |
      {"data":[{"id":"ZDCZV3KiSV6lRWIeR5fFrw","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1699619274","rate":0.1,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 service:my-service"},"editable":true,"execution_order":1,"modified_by":"frog@datadoghq.com","modified_at":1699619276,"created_by":"frog@datadoghq.com","created_at":1699619276},"type":"apm_retention_filter"},{"id":"cQ9X4t6OROuFAgx4pDlVjw","attributes":{"name":"Dynamic Instrumentation Default","rate":1.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"operation_name:dd.dynamic.span"},"editable":true,"execution_order":2,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"7RBOb7dLSYWI01yc3pIH8w","attributes":{"name":"Error Default","rate":1.0,"enabled":true,"filter_type":"spans-errors-sampling-processor","filter":{"query":"status:error"},"editable":true,"execution_order":3,"modified_by":"frog@datadoghq.com","modified_at":1695634009,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"jdZrilSJQLqzb6Cu7aub9Q","attributes":{"name":"Application Security Monitoring Default","rate":1.0,"enabled":false,"filter_type":"spans-appsec-sampling-processor","filter":{"query":"@appsec.event:true"},"editable":true,"execution_order":4,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"}]}
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
    method: GET
  response:
    body: |
      {"data":[{"id":"ZDCZV3KiSV6lRWIeR5fFrw","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1699619274","rate":0.1,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 service:my-service"},"editable":true,"execution_order":1,"modified_by":"frog@datadoghq.com","modified_at":1699619276,"created_by":"frog@datadoghq.com","created_at":1699619276},"type":"apm_retention_filter"},{"id":"cQ9X4t6OROuFAgx4pDlVjw","attributes":{"name":"Dynamic Instrumentation Default","rate":1.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"operation_name:dd.dynamic.span"},"editable":true,"execution_order":2,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"7RBOb7dLSYWI01yc3pIH8w","attributes":{"name":"Error Default","rate":1.0,"enabled":true,"filter_type":"spans-errors-sampling-processor","filter":{"query":"status:error"},"editable":true,"execution_order":3,"modified_by":"frog@datadoghq.com","modified_at":1695634009,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"jdZrilSJQLqzb6Cu7aub9Q","attributes":{"name":"Application Security Monitoring Default","rate":1.0,"enabled":false,"filter_type":"spans-appsec-sampling-processor","filter":{"query":"@appsec.event:true"},"editable":true,"execution_order":4,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"}]}
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
    method: GET
  response:
    body: |
      {"data":[{"id":"ZDCZV3KiSV6lRWIeR5fFrw","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1699619274","rate":0.1,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 service:my-service"},"editable":true,"execution_order":1,"modified_by":"frog@datadoghq.com","modified_at":1699619276,"created_by":"frog@datadoghq.com","created_at":1699619276},"type":"apm_retention_filter"},{"id":"cQ9X4t6OROuFAgx4pDlVjw","attributes":{"name":"Dynamic Instrumentation Default","rate":1.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"operation_name:dd.dynamic.span"},"editable":true,"execution_order":2,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"7RBOb7dLSYWI01yc3pIH8w","attributes":{"name":"Error Default","rate":1.0,"enabled":true,"filter_type":"spans-errors-sampling-processor","filter":{"query":"status:error"},"editable":true,"execution_order":3,"modified_by":"frog@datadoghq.com","modified_at":1695634009,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"jdZrilSJQLqzb6Cu7aub9Q","attributes":{"name":"Application Security Monitoring Default","rate":1.0,"enabled":false,"filter_type":"spans-appsec-sampling-processor","filter":{"query":"@appsec.event:true"},"editable":true,"execution_order":4,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"}]}
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
    method: GET
  response:
    body: |
      {"data":[{"id":"ZDCZV3KiSV6lRWIeR5fFrw","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1699619274","rate":1.0,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123"},"editable":true,"execution_order":1,"modified_by":"frog@datadoghq.com","modified_at":1699619278,"created_by":"frog@datadoghq.com","created_at":1699619276},"type":"apm_retention_filter"},{"id":"cQ9X4t6OROuFAgx4pDlVjw","attributes":{"name":"Dynamic Instrumentation Default","rate":1.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"operation_name:dd.dynamic.span"},"editable":true,"execution_order":2,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"7RBOb7dLSYWI01yc3pIH8w","attributes":{"name":"Error Default","rate":1.0,"enabled":true,"filter_type":"spans-errors-sampling-processor","filter":{"query":"status:error"},"editable":true,"execution_order":3,"modified_by":"frog@datadoghq.com","modified_at":1695634009,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"jdZrilSJQLqzb6Cu7aub9Q","attributes":{"name":"Application Security Monitoring Default","rate":1.0,"enabled":false,"filter_type":"spans-appsec-sampling-processor","filter":{"query":"@appsec.event:true"},"editable":true,"execution_order":4,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"}]}
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
    url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
    method: GET
  response:
    body: |
      {"data":[{"id":"ZDCZV3KiSV6lRWIeR5fFrw","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1699619274","rate":1.0,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123"},"editable":true,"execution_order":1,"modified_by":"frog@datadoghq.com","modified_at":1699619278,"created_by":"frog@datadoghq.com","created_at":1699619276},"type":"apm_retention_filter"},{"id":"cQ9X4t6OROuFAgx4pDlVjw","attributes":{"name":"Dynamic Instrumentation Default","rate":1.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"operation_name:dd.dynamic.span"},"editable":true,"execution_order":2,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"7RBOb7dLSYWI01yc3pIH8w","attributes":{"name":"Error Default","rate":1.0,"enabled":true,"filter_type":"spans-errors-sampling-processor","filter":{"query":"status:error"},"editable":true,"execution_order":3,"modified_by":"frog@datadoghq.com","modified_at":1695634009,"created_by":"","created_at":0},"type":"apm_retention_filter"},{"id":"jdZrilSJQLqzb6Cu7aub9Q","attributes":{"name":"Application Security Monitoring Default","rate":1.0,"enabled":false,"filter_type":"spans-appsec-sampling-processor","filter":{"query":"@appsec.event:true"},"editable":true,"execution_order":4,"modified_by":"","modified_at":0,"created_by":"","created_at":0},"type":"apm_retention_filter"}]}
    headers:
      Content-Type:
      - application/json
    status: 200 OK
    code: 200
    duration: ""
