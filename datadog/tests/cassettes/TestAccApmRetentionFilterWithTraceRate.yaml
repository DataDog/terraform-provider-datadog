---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 279
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: |
            {"data":{"attributes":{"enabled":false,"filter":{"query":"error_code:456 service:my-other-service"},"filter_type":"spans-sampling-processor","name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315 - second","rate":0.1,"trace_rate":0.5},"type":"apm_retention_filter"}}
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
        method: POST
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"LofbpAm-Q4eoI4FNPpHTNg","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315 - second","rate":0.1,"trace_rate":0.5,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456 service:my-other-service"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619317,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 349.070458ms
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 269
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: |
            {"data":{"attributes":{"enabled":true,"filter":{"query":"error_code:456 service:my-other-service"},"filter_type":"spans-sampling-processor","name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315","rate":0.1,"trace_rate":0.5},"type":"apm_retention_filter"}}
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters
        method: POST
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"FfKxQswITNuRpLEtxSxVEQ","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315","rate":0.1,"trace_rate":0.5,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456 service:my-other-service"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619317,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 329.772125ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/LofbpAm-Q4eoI4FNPpHTNg
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"LofbpAm-Q4eoI4FNPpHTNg","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315 - second","rate":0.1,"trace_rate":0.5,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456 service:my-other-service"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619317,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 216.662833ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/FfKxQswITNuRpLEtxSxVEQ
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"FfKxQswITNuRpLEtxSxVEQ","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315","rate":0.1,"trace_rate":0.5,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456 service:my-other-service"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619317,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 215.697375ms
    - id: 4
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/FfKxQswITNuRpLEtxSxVEQ
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"FfKxQswITNuRpLEtxSxVEQ","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315","rate":0.1,"trace_rate":0.5,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456 service:my-other-service"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619317,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 208.267917ms
    - id: 5
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/LofbpAm-Q4eoI4FNPpHTNg
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"LofbpAm-Q4eoI4FNPpHTNg","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315 - second","rate":0.1,"trace_rate":0.5,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456 service:my-other-service"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619317,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 211.961833ms
    - id: 6
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/FfKxQswITNuRpLEtxSxVEQ
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"FfKxQswITNuRpLEtxSxVEQ","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315","rate":0.1,"trace_rate":0.5,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456 service:my-other-service"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619317,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 213.318458ms
    - id: 7
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/LofbpAm-Q4eoI4FNPpHTNg
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"LofbpAm-Q4eoI4FNPpHTNg","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315 - second","rate":0.1,"trace_rate":0.5,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456 service:my-other-service"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619317,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 233.490292ms
    - id: 8
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 250
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: |
            {"data":{"attributes":{"enabled":true,"filter":{"query":"error_code:456"},"filter_type":"spans-sampling-processor","name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315","rate":1,"trace_rate":0.8},"id":"","type":"apm_retention_filter"}}
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/FfKxQswITNuRpLEtxSxVEQ
        method: PUT
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"FfKxQswITNuRpLEtxSxVEQ","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315","rate":1.0,"trace_rate":0.8,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619323,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 354.698958ms
    - id: 9
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 260
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: |
            {"data":{"attributes":{"enabled":false,"filter":{"query":"error_code:456"},"filter_type":"spans-sampling-processor","name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315 - second","rate":1,"trace_rate":0.8},"id":"","type":"apm_retention_filter"}}
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/LofbpAm-Q4eoI4FNPpHTNg
        method: PUT
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"LofbpAm-Q4eoI4FNPpHTNg","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315 - second","rate":1.0,"trace_rate":0.8,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619323,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 377.992125ms
    - id: 10
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/FfKxQswITNuRpLEtxSxVEQ
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"FfKxQswITNuRpLEtxSxVEQ","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315","rate":1.0,"trace_rate":0.8,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619323,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 214.354375ms
    - id: 11
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/LofbpAm-Q4eoI4FNPpHTNg
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"LofbpAm-Q4eoI4FNPpHTNg","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315 - second","rate":1.0,"trace_rate":0.8,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619323,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 226.297125ms
    - id: 12
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/LofbpAm-Q4eoI4FNPpHTNg
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"LofbpAm-Q4eoI4FNPpHTNg","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315 - second","rate":1.0,"trace_rate":0.8,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619323,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 433.801458ms
    - id: 13
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/FfKxQswITNuRpLEtxSxVEQ
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"FfKxQswITNuRpLEtxSxVEQ","attributes":{"name":"tf-TestAccApmRetentionFilterWithTraceRate-local-1758619315","rate":1.0,"trace_rate":0.8,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:456"},"editable":true,"modified_by":"frog@datadoghq.com","modified_at":1758619323,"created_by":"frog@datadoghq.com","created_at":1758619317},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 434.47875ms
    - id: 14
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - '*/*'
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/FfKxQswITNuRpLEtxSxVEQ
        method: DELETE
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding: []
        trailer: {}
        content_length: 3
        uncompressed: false
        body: |
            {}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 454.432833ms
    - id: 15
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - '*/*'
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/LofbpAm-Q4eoI4FNPpHTNg
        method: DELETE
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding: []
        trailer: {}
        content_length: 3
        uncompressed: false
        body: |
            {}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 358.0355ms
    - id: 16
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/LofbpAm-Q4eoI4FNPpHTNg
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"errors":["retention filter with id: ''LofbpAm-Q4eoI4FNPpHTNg'' not found"]}'
        headers:
            Content-Type:
                - application/json
        status: 404 Not Found
        code: 404
        duration: 279.132083ms
    - id: 17
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datadoghq.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datadoghq.com/api/v2/apm/config/retention-filters/FfKxQswITNuRpLEtxSxVEQ
        method: GET
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding:
            - chunked
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"errors":["retention filter with id: ''FfKxQswITNuRpLEtxSxVEQ'' not found"]}'
        headers:
            Content-Type:
                - application/json
        status: 404 Not Found
        code: 404
        duration: 238.970709ms
