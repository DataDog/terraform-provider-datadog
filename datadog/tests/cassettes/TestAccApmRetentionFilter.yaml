---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 265
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: |
            {"data":{"attributes":{"enabled":false,"filter":{"query":"error_code:123 service:my-service @duration:\u003e600ms"},"filter_type":"spans-sampling-processor","name":"tf-TestAccApmRetentionFilter-local-1720615300 - second","rate":0.1},"type":"apm_retention_filter"}}
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"dlpGWducS8K0tlxplwoA9A","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300 - second","rate":0.1,"trace_rate":0.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 AND service:my\\-service AND @duration:>600000000"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615303,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615303},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 251.095291ms
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 255
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: |
            {"data":{"attributes":{"enabled":true,"filter":{"query":"error_code:123 service:my-service @duration:\u003e600ms"},"filter_type":"spans-sampling-processor","name":"tf-TestAccApmRetentionFilter-local-1720615300","rate":0.1},"type":"apm_retention_filter"}}
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"5kzu8KWESL6hHy10Xli37w","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300","rate":0.1,"trace_rate":0.0,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 AND service:my\\-service AND @duration:>600000000"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615304,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615304},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 227.2685ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/5kzu8KWESL6hHy10Xli37w
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"5kzu8KWESL6hHy10Xli37w","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300","rate":0.1,"trace_rate":0.0,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 AND service:my\\-service AND @duration:>600000000"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615304,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615304},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 141.7685ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/dlpGWducS8K0tlxplwoA9A
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"dlpGWducS8K0tlxplwoA9A","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300 - second","rate":0.1,"trace_rate":0.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 AND service:my\\-service AND @duration:>600000000"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615303,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615303},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 1.023662s
    - id: 4
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/dlpGWducS8K0tlxplwoA9A
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"dlpGWducS8K0tlxplwoA9A","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300 - second","rate":0.1,"trace_rate":0.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 AND service:my\\-service AND @duration:>600000000"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615303,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615303},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 126.99175ms
    - id: 5
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/5kzu8KWESL6hHy10Xli37w
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"5kzu8KWESL6hHy10Xli37w","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300","rate":0.1,"trace_rate":0.0,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 AND service:my\\-service AND @duration:>600000000"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615304,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615304},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 145.984583ms
    - id: 6
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/5kzu8KWESL6hHy10Xli37w
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"5kzu8KWESL6hHy10Xli37w","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300","rate":0.1,"trace_rate":0.0,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 AND service:my\\-service AND @duration:>600000000"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615304,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615304},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 126.756709ms
    - id: 7
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/dlpGWducS8K0tlxplwoA9A
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"dlpGWducS8K0tlxplwoA9A","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300 - second","rate":0.1,"trace_rate":0.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123 AND service:my\\-service AND @duration:>600000000"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615303,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615303},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 153.108417ms
    - id: 8
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 220
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: |
            {"data":{"attributes":{"enabled":true,"filter":{"query":"error_code:123"},"filter_type":"spans-sampling-processor","name":"tf-TestAccApmRetentionFilter-local-1720615300","rate":1},"id":"","type":"apm_retention_filter"}}
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/5kzu8KWESL6hHy10Xli37w
        method: PUT
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"5kzu8KWESL6hHy10Xli37w","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300","rate":1.0,"trace_rate":0.0,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615307,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615304},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 197.021375ms
    - id: 9
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 230
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: |
            {"data":{"attributes":{"enabled":false,"filter":{"query":"error_code:123"},"filter_type":"spans-sampling-processor","name":"tf-TestAccApmRetentionFilter-local-1720615300 - second","rate":1},"id":"","type":"apm_retention_filter"}}
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/dlpGWducS8K0tlxplwoA9A
        method: PUT
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"dlpGWducS8K0tlxplwoA9A","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300 - second","rate":1.0,"trace_rate":0.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615307,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615303},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 199.350208ms
    - id: 10
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/5kzu8KWESL6hHy10Xli37w
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"5kzu8KWESL6hHy10Xli37w","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300","rate":1.0,"trace_rate":0.0,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615307,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615304},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 129.626875ms
    - id: 11
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/dlpGWducS8K0tlxplwoA9A
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"dlpGWducS8K0tlxplwoA9A","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300 - second","rate":1.0,"trace_rate":0.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615307,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615303},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 127.076625ms
    - id: 12
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/5kzu8KWESL6hHy10Xli37w
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"5kzu8KWESL6hHy10Xli37w","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300","rate":1.0,"trace_rate":0.0,"enabled":true,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615307,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615304},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 127.296792ms
    - id: 13
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/dlpGWducS8K0tlxplwoA9A
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: |
            {"data":{"id":"dlpGWducS8K0tlxplwoA9A","attributes":{"name":"tf-TestAccApmRetentionFilter-local-1720615300 - second","rate":1.0,"trace_rate":0.0,"enabled":false,"filter_type":"spans-sampling-processor","filter":{"query":"error_code:123"},"editable":true,"modified_by":"salah.bachircherif@datadoghq.com","modified_at":1720615307,"created_by":"salah.bachircherif@datadoghq.com","created_at":1720615303},"type":"apm_retention_filter"}}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 131.44925ms
    - id: 14
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - '*/*'
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/5kzu8KWESL6hHy10Xli37w
        method: DELETE
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 3
        uncompressed: false
        body: |
            {}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 246.304791ms
    - id: 15
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - '*/*'
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/dlpGWducS8K0tlxplwoA9A
        method: DELETE
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 3
        uncompressed: false
        body: |
            {}
        headers:
            Content-Type:
                - application/json
        status: 200 OK
        code: 200
        duration: 234.196167ms
    - id: 16
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/5kzu8KWESL6hHy10Xli37w
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"errors":["retention filter with id: ''5kzu8KWESL6hHy10Xli37w'' not found"]}'
        headers:
            Content-Type:
                - application/json
        status: 404 Not Found
        code: 404
        duration: 138.437ms
    - id: 17
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.datad0g.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
        url: https://api.datad0g.com/api/v2/apm/config/retention-filters/dlpGWducS8K0tlxplwoA9A
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"errors":["retention filter with id: ''dlpGWducS8K0tlxplwoA9A'' not found"]}'
        headers:
            Content-Type:
                - application/json
        status: 404 Not Found
        code: 404
        duration: 128.565625ms
